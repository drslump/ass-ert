!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.ass=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){function ass(value){return 0===arguments.length?new Chain:new Chain(value)}var _=require("lodash"),Chain=require("./chain"),Matcher=require("./matcher"),Expectation=require("./expectation"),util=require("./util"),defProp=util.bind(Object.defineProperty,Object);ass._=function(value){return new Chain(value)._},ass.matchers=[],defProp(ass,"help",{get:function(){var s="";return _.forEach(ass.matchers,function(matcher){var fn=matcher.test.toString(),args=fn.replace(/^function\s*\(([^\)]*)\)[\S\s]*/,"$1");args=args.split(",").map(function(x){return x.trim()}),args.shift(),fn=args.length?" ("+args.join(", ")+")":"",s+="> ."+matcher.name+fn+"\n\n",s+="  "+matcher.help.replace(/\n/g,"\n  "),s+="\n\n"}),s}}),ass.ok=function(cond,message){return 1===arguments.length&&(message="expected a truish value"),ass.desc(message).truthy.assert(cond,ass.ok),cond},ass.ko=function(cond,message){return 1===arguments.length&&(message="expected a falsy value"),ass.desc(message).falsy.assert(cond,ass.ko),cond},ass.marks=function(){var expected=arguments[0],desc=arguments[1];return"undefined"==typeof expected?(expected=ass.marks.counter,ass.marks.counter=0,expected):void ass.desc(desc||"ass.marks").eq(expected).assert(ass.marks.counter,ass.marks)},ass.marks.counter=0,ass.register=function(name,matcher){if(name instanceof Matcher)matcher=name,name=matcher.name;else{if("object"==typeof name)return void Object.keys(name).forEach(function(key){ass.register(key,name[key])});_.forEach(matcher.aliases,function(alias){ass.register(new Matcher(alias,matcher))}),matcher=new Matcher(name,matcher)}ass.matchers.push(matcher);var fnKey=1===matcher.arity?"get":"value",prop={configurable:!1,enumerable:!0};"value"===fnKey&&(prop.writable=!1),prop[fnKey]=function fn(){var exp=new Expectation(matcher,arguments);return this.__expectations__.push(exp),this.__deferred__||this.assert(this.value,fn),this},defProp(Chain.prototype,name,prop),prop[fnKey]=function(){var chain=new Chain;return"get"===fnKey?chain[name]:chain[name].apply(chain,arguments)},defProp(ass,name,prop),prop[fnKey]=function passthrough(){return this[name].assert(this.value,passthrough).valueOf()},prop.enumerable=!1,defProp(Chain.prototype,"$"+name,prop),defProp(ass,"$"+name,{value:function(value){if("get"===fnKey)return ass(value)["$"+name];var chain=new Chain;return chain[name].apply(chain,arguments),chain.through},enumerable:!1})},module.exports=ass},{"./chain":2,"./expectation":4,"./matcher":5,"./util":13,lodash:26}],2:[function(require,module){function Chain(value){if(!Chain.isChain(this))throw new Error("Ass Chain constructor called without new!");this.value=arguments.length>0?value:this.__GUARD__,defProp(this,"__description__",{value:"",enumerable:!1,configurable:!1,writable:!0}),defProp(this,"__expectations__",{value:[],enumerable:!1,configurable:!1,writable:!1}),defProp(this,"__deferred__",{value:this.value===this.__GUARD__,enumerable:!1,configurable:!1,writable:!0}),defProp(this,"__thens__",{value:[],enumerable:!1,configurable:!1,writable:!1}),this.test=util.bind(Chain.prototype.test,this),this.assert=util.bind(Chain.prototype.assert,this),this.result=util.bind(Chain.prototype.result,this),this.through=util.bind(Chain.prototype.through,this),this.$=this.through}function dumpChain(resolved,indent){var result="";return indent=indent||"",resolved.forEach(function(exp,idx){return Array.isArray(exp)?void(result+=dumpChain(exp,indent+"  ")):exp.result?void(result+=indent+" [32mPassed:[0m "+exp.description+"\n"):(result+=indent+" [31mFailed:[0m "+exp.description+"\n",void(idx===resolved.length-1&&(result+=indent+"    [33mBut:[0m "+exp.failure+"\n")))}),result}var _=require("lodash"),resolvers=require("./resolvers"),AssError=require("./error"),util=require("./util"),Promise=util.Promise,defProp=util.bind(Object.defineProperty,Object);Chain.isChain=function(obj){return obj&&obj.constructor===Chain};var proto=Chain.prototype=Object.create(null);proto.constructor=Chain,proto.__GUARD__={valueOf:function(){return this.toString()},toString:function(){return"{{valueless}}"}},defProp(proto,"help",{get:function(){var tail=_.tail(this.__expectations__);return tail?tail.help:"N/A"}}),defProp(proto,"_",{get:function fn(){return this.__deferred__?(this.__deferred__=!1,this.assert(this.value,fn)):this.__deferred__=!0,this}}),proto.then=function(cb,eb){if(this.__thens__.push([cb,eb]),!this.__deferred__&&this.value!==this.__GUARD__){var resolver=resolvers.acquire(this);resolver(this.value)}return this},proto["catch"]=function(eb){return this.then(null,eb)},proto.dispatchResult=function(resolved,result){if(0!==this.__thens__.length){var actual=this.value;result===!1&&(actual=this.buildError(resolved,proto.dispatchResult));var promise=new Promise(function(resolve,reject){actual&&"function"==typeof actual.then&&(actual=["Ass: Value wrapped in an array since it looks like a Promise",actual]),(result?resolve:reject)(actual)});_.forEach(this.__thens__,function(callbacks){promise=promise.then.apply(promise,callbacks)})}},proto.buildError=function(resolved,ssf){var error=this.__description__+"\n\n";exp=resolved[resolved.length-1],error+=dumpChain(resolved),util.doColors()||(error=util.unansi(error));var expected=exp.expected;"function"==typeof expected&&(expected=null);var inst=new AssError(error,ssf||arguments.callee||proto.buildError);return inst.showDiff=!1,inst.actual=null,inst.expected=null,inst},proto.test=function(actual){0===arguments.length&&(actual=this.value);var resolver=resolvers.acquire(this),result=resolver(actual);return result},proto.assert=function(actual,ssf){if(0===arguments.length&&(actual=this.value),actual===this.__GUARD__)return this;var resolver=resolvers.acquire(this),result=resolver(actual);if(result===!1)throw this.buildError(resolver.resolved,ssf||this.assert);return void 0===result&&(this.__deferred__=!0),this},proto.through=function(actual){return this.assert(actual,proto.through),actual},proto.result=function(actual){var result;0===arguments.length&&(actual=this.value);try{this.tap(function(value){result=value}).test(actual)}finally{this.__expectations__.pop()}return result},Chain.prototype.valueOf=function(){return this.value},Chain.prototype.toString=function(){if(this.__description__)return this.__description__;var descs=this.__expectations__.filter(function(c){return c.description}).map(function(c){return c.description});return descs.length>1?"("+descs.join(", ")+")":1===descs.length?descs[0]:"<AssChain>"},module.exports=Chain},{"./error":3,"./resolvers":11,"./util":13,lodash:26}],3:[function(require,module){function getTargetLine(frames){function getSrc(frame){var fn=frame.getFunction();return fn?fn.toString().replace(/\s+/g,""):null}var target=frames[0],targetSrc=getSrc(target);if(!targetSrc)return null;samefile=frames.filter(function(frame){return frame&&frame.getFileName()===target.getFileName()});for(var wrapper,i=1;i<samefile.length;i++){var src=getSrc(samefile[i]);if(src&&-1!==src.indexOf(targetSrc)){wrapper=samefile[i];break}}if(wrapper){var relLn=target.getLineNumber()-wrapper.getLineNumber(),lines=(target.getLineNumber()===wrapper.getLineNumber()?0:target.getColumnNumber()-1,target.getFunction().toString().split(/\n/));if(lines[relLn])return lines[relLn]}return null}var Failure=require("failure"),unansi=require("./util").unansi,AssError=Failure.create("AssError"),proto=AssError.prototype;proto.showDiff=!1,proto.actual=null,proto.expected=null,proto.toJSON=function(stack){var props={name:this.name,message:unansi(this.message),actual:this.actual,expected:this.expected,showDiff:this.showDiff};return stack&&this.stack&&(props.stack=this.stack),props},proto.toString=function(){var msg=Failure.prototype.toString.call(this),line=getTargetLine(this.frames);return line&&(msg+="\n  >> "+line.replace(/^\s+/,"").slice(0,60)+"\n"),msg},module.exports=AssError},{"./util":13,failure:23}],4:[function(require,module){function Expectation(matcher,args){matcher.assign(this),this.args=_.toArray(args),this.actual=void 0}var _=require("lodash"),Matcher=(require("./chain"),require("./matcher")),template=require("./util").template,proto=Expectation.prototype=Object.create(Matcher.prototype);proto.constructor=Expectation,Object.defineProperty(proto,"expected",{get:function(){return this.args[0]},set:function(v){Object.defineProperty(this,"expected",{value:v})}}),_.times(5,function(i){Object.defineProperty(proto,"arg"+(i+1),{get:function(){return this.args[i]}})}),Object.defineProperty(proto,"description",{get:function(){return this.desc?"function"==typeof this.desc?this.desc(this):template(this.desc,this):null}}),Object.defineProperty(proto,"failure",{get:function(){return"function"==typeof this.fail?this.fail(this):template(this.fail,this)}}),Expectation.prototype.mutate=function(value){return function(resolver){return resolver(value)}},Expectation.prototype.resolve=function(){var args,result;return args=[this.actual].concat(this.args),result=this.test.apply(this,args),"string"==typeof result&&(this.fail=result,result=!1),result},Expectation.prototype.toString=function(){return this.description},module.exports=Expectation},{"./chain":2,"./matcher":5,"./util":13,lodash:26}],5:[function(require,module){function Matcher(name,descriptor){if("function"==typeof descriptor&&(descriptor={test:descriptor}),this.name=name,this.help=Array.isArray(descriptor.help)?descriptor.help.join("\n"):descriptor.help||"Not available",this.desc=void 0!==descriptor.desc?descriptor.desc:this.name,this.fail=descriptor.fail||"was {{ actual }}",!descriptor.test)throw new Error("test function not defined for the matcher");this.test=descriptor.test,this.arity=void 0!==descriptor.arity?descriptor.arity:this.test.length}Matcher.prototype=Object.create(null),Matcher.prototype.constructor=Matcher,Matcher.prototype.clone=function(){return new this.constructor(this.name,{help:this.help,desc:this.desc,fail:this.fail,test:this.test,arity:this.arity})},Matcher.prototype.assign=function(obj){obj.help=this.help,obj.desc=this.desc,obj.fail=this.fail,obj.test=this.test,obj.arity=this.arity},Matcher.prototype.toString=function(){return"<Ass.Matcher "+this.name+">"},module.exports=Matcher},{}],6:[function(require){var _=require("lodash"),ass=require("../ass");ass.register({and:{help:["Composes a new expectation from two or more expressions, which will only","succeed if all the expressions that form it do indeed succeed.","Note: evaluation will stop as soon as one of the expressions fails."],desc:'${ args.join(" AND ") }',fail:"was {{ actual }}",test:function(actual){var branches=_.toArray(arguments).slice(1);return function(resolver){var undefs=0,result=_.every(branches,function(branch){var partial=branch.test(actual);return void 0===partial?(resolver.paused||resolver.pause(),undefs+=1,branch.then(_.once(function(){undefs-=1,0===undefs&&resolver.resume(actual)}),_.once(function(){resolver.resume(null,!1)})),!0):partial});return resolver.paused?void 0:(result===!0&&(result=resolver(actual)),result)}}},or:{help:["Composes a new expectation from two or more expressions, which will only","succeed if at least one of the expressions does.","Note: evaluation will stop as soon as one of the expressions succeeds."],desc:'${ args.join(" OR ") }',fail:"was {{ actual }}",test:function(actual){var branches=_.toArray(arguments).slice(1);return function(resolver){var undefs=0,result=_.some(branches,function(branch){var partial=branch.test(actual);return void 0===partial?(resolver.paused||resolver.pause(),undefs+=1,branch.then(_.once(function(){resolver.resume(actual)}),_.once(function(){undefs-=1,0===undefs&&resolver.resume(null,!1)})),!1):partial});return resolver.paused?void 0:(result===!0&&(result=resolver(actual)),result)}}},xor:{help:["Composes a new expectation from two or more expressions, which will only","succeed if at least one of the expressions does but not all of them."],desc:'${ args.join(" XOR ") }',fail:"was {{ actual }}",test:function(actual){var branches=_.toArray(arguments).slice(1);return function(resolver){var undefs=0,oks=0,kos=0;return _.forEach(branches,function(branch){var partial=branch.test(actual);void 0===partial?(resolver.paused||resolver.pause(),undefs+=1,branch.then(_.once(function(){return kos>0?void resolver.resume(actual):(oks+=1,undefs-=1,void(0===undefs&&resolver.resume(actual,oks>0&&kos>0?void 0:!1)))}),_.once(function(){return oks>0?void resolver.resume(actual):(kos+=1,undefs-=1,void(0===undefs&&resolver.resume(actual,oks>0&&kos>0?void 0:!1)))}))):partial===!0?oks+=1:partial===!1&&(kos+=1)}),resolver.paused?void 0:oks>0&&kos>0?resolver(actual):!1}}}})},{"../ass":1,lodash:26}],7:[function(require){var _=require("lodash"),ass=require("../ass"),util=require("../util");ass.register({desc:{help:"Provide a custom description for reported failures",desc:null,test:function(actual,desc){return function(resolver){return resolver.chain.__description__=desc,resolver(actual)}}},to:{aliases:["a","an","be"],help:["Just some syntax sugar to make the expectations easier on the eyes."],desc:null,test:function(){return!0}},mark:{help:["Increases the global `ass.marks` counter every time it gets","evaluated as part of an expression. Use it to verify that the","preceding expectations are actually being executed.","An easy way to support this when using a test runner is to reset","the counter by calling `ass.marks()` on a beforeEach hook and","then verify at the end of test with `ass.marks(N)` (where N is","the number of marks you expected)."],desc:null,test:function(){return ass.marks.counter+=1,!0}},any:{help:"Allows any value without testing it.",desc:"is anything",test:function(){return!0}},defined:{help:"Checks if the value is not null or undefined.",desc:"is defined",fail:"was ${ actual }",test:function(actual){return null!=actual}},empty:{help:"Checks if the value is empty (or has a length of 0).",desc:"is empty",fail:"was ${ actual }",test:function(actual){return null==actual||0===actual.length}},nempty:{aliases:["nonEmpty"],help:"Checks if the value is not empty (or has a length greater than 0).",desc:"is not empty",fail:"was ${ actual }",test:function(actual){return null!=actual&&actual.length>0}},truthy:{aliases:["truish"],help:'The value should be truthy (not undefined, null, 0, "" or []).',desc:"is truthy",fail:"was ${ actual }",test:function(actual){return actual?"number"==typeof actual.length?actual.length>0:!0:!1}},falsy:{help:'The value should be falsy (undefined, null, 0, "" or []).',desc:"is falsy",fail:"was {{ actual }}",test:function(actual){return actual?"number"==typeof actual.length?0===actual.length:!1:!0}},not:{aliases:["no","NO","NOT"],help:"Negates the result for the rest of the expression.",desc:"Not!",fail:"was {{ actual }}",test:function(actual){return function(resolver){return resolver.exhausted?!0:(resolver.finalize(function(final){return!final}),resolver(actual))}}},is:{aliases:["equal","equals"],help:["Checks strict equality between the value and its expected.","Note: if the expected value is a chain expression it'll be tested instead."],desc:"to strictly equal {{expected}}",fail:"was {{actual}}",test:function(actual,expected){return ass.Chain.isChain(expected)?expected.test(actual):actual===expected}},eq:{aliases:["eql","eqls"],help:["Checks deep non-strict equality between the value and its expected.","It understands ass expressions so you can combine them at will in the","expected value."],desc:"to equal {{expected}}",fail:"was {{actual}}",test:function(actual,expected){return _.isEqual(actual,expected)}},match:{help:["Tries to match the subject against the expected value which can be either","a function, an ass expression, an object with a .test() function (for ","instance a RegExp) or a plain object to partially match against the value."],desc:"to match {{expected}}",fail:"was {{actual}}",test:function(actual,expected){if("function"==typeof expected.test)return!!expected.test(actual);if(_.isPlainObject(expected)){var result=_.where([actual],expected);return 1===result.length}return"function"!=typeof expected?"expected is not a function and does not have a .test method":!!expected(actual)}},above:{aliases:["gt","moreThan","greaterThan"],help:"Checks if the value is higher than its expected.",desc:"to be more than {{expected}}",fail:"was {{actual}}",test:function(actual,expected){return actual>expected}},below:{aliases:["lt","lessThan"],help:"Checks if the value is lower tha its expected.",desc:"to be less than {{expected}}",fail:"was {{actual}}",test:function(actual,expected){return expected>actual}},aboveOrEqual:{aliases:["least","atLeast","gte","moreThanOrEqual","greaterThanOrEqual"],help:"Checks if the value is higher or equal than its expected.",desc:"to be more than or equal to ${expected}",fail:"was {{actual}}",test:function(actual,expected){return actual>=expected}},belowOrEqual:{aliases:["most","atMost","lte","lessThanOrEqual"],help:"Checks if the value is lower or equal than its expected.",desc:"to be less than or equal to ${expected}",fail:"was ${actual}",test:function(actual,expected){return expected>=actual}},close:{aliases:["closeTo"],help:["Checks if the value is close to the expected based on a given delta.","The default delta is 0.1 so the value 3.55 is close to any value between","3.45 and 3.65 (both inclusive).","String values are also supported by computing the distance between them","using the Sift4 algorithm. For string values the delta is interpreted as","a percentage (ie: 0.25 is 25%)."],desc:"to be close to {{ expected }}",fail:"was {{ actual }}",test:function(actual,expected,delta){if(delta=null==delta?.1:delta,_.isString(actual)&&_.isString(expected)){var diff=util.sift4(actual,expected,3)/Math.max(actual.length,expected.length);return delta>=diff}return actual>=expected-delta&&expected+delta>=actual}},"instanceof":{aliases:["instanceOf","instance","isa"],help:["Checks if the value is an instance of the given constructor.","When the expected is a string it'll actually use a `typeof`","comparison."],desc:"to be an instance of {{expected}}",test:function(actual,expected){return _.isString(expected)?typeof actual===expected?!0:"had type {{ typeof actual }}":actual instanceof expected}},"typeof":{help:"Checks if the value is of a specific type",desc:"to have type {{expected}}",fail:"had ${ typeof actual }",test:function(actual,expected){return _.isEqual(typeof actual,expected)}},number:{help:"Check if the value is a number (different of NaN).",desc:"to be a number",fail:"had type ${ typeof actual }",test:function(actual){return _.isNumber(actual)&&!isNaN(actual)}},bool:{aliases:["boolean"],help:"Check if the value is a boolean.",desc:"to be a boolean",fail:"had type ${ typeof actual }",test:function(actual){return _.isBoolean(actual)}},string:{aliases:["str"],help:"Check if the value is a string.",desc:"to be a string",fail:"had type ${ typeof actual }",test:function(actual){return _.isString(actual)}},object:{help:"Check that value is of type object.",desc:"to be an object",fail:"had type ${ typeof actual }",test:function(actual){return _.isObject(actual)}},plainObject:{aliases:["plain","obj"],help:"Checks that value is an object created by the Object constructor.",fail:"was ${actual}",test:function(actual){return _.isPlainObject(actual)}},array:{help:"Check that value is an Array.",desc:"to be an Array",fail:"had type ${ typeof actual }",test:function(actual){return _.isArray(actual)}},"function":{help:"Check that value is a Function.",desc:"to be a Function",fail:"had type ${ typeof actual }",test:function(actual){return _.isFunction(actual)}},regexp:{help:"Check that value is a RegExp",desc:"to be a RegExp",fail:"had type ${ typeof actual }",test:function(actual){return _.isRegExp(actual)}},date:{help:"Check that value is a Date",desc:"to be a Date",fail:"had type ${ typeof actual }",test:function(actual){return _.isDate(actual)}},element:{help:"Check that value is a DOM element",desc:"to be a DOM element",test:function(actual){return _.isElement(actual)}},error:{help:"Check that value is an error (or looks like it)",desc:"to be an Error",test:function(actual){return actual instanceof Error?!0:_.isObject(actual)&&_.isString(actual.name)&&_.isString(actual.message)}},undefined:{help:"Check that value is undefined.",desc:"to be undefined",fail:"was ${ actual }",test:function(actual){return _.isUndefined(actual)}},"null":{help:"Check that value is null.",desc:"to be null",fail:"was ${ actual }",test:function(actual){return null===actual}},NaN:{help:"Check that value is NaN.",desc:"to be NaN",test:function(actual){return this.fail=_.isNumber(actual)?"was ${actual}":"had type ${typeof actual}",isNaN(actual)}},"true":{help:"Check that value is true",desc:"to be true",fail:"was {{ actual }}",test:function(actual){return _.isBoolean(actual)?1==actual?!0:"was {{actual}}":"had type ${typeof actual}"}},"false":{help:"Check that value is false",desc:"to be false",test:function(actual){return _.isBoolean(actual)?0==actual?!0:"was {{actual}}":"had type ${typeof actual}"}},raises:{aliases:["throws"],help:["Checks that executing the value results in an exception being thrown.","The captured exception value is used to mutate the subject for the","following expectations."],desc:"throws an error",test:function(actual,expected){if(!_.isFunction(actual))return"is not a function: {{actual}}";try{return actual(),"did not throw anything"}catch(e){return null==expected?this.mutate(e):_.isFunction(expected)&&e instanceof expected?this.mutate(e):_.isEqual(e,expected)?this.mutate(e):(this.exception=e,"got {{ exception }}")}}},has:{aliases:["have","contain","contains"],help:["Check if the value has some expected value. It understands expected","chain expressions so this serves as the equivalent of .eq for partial","matches."],desc:"to contain {{expected}}",fail:"was {{actual}}",test:function(actual){return this.expected=_.toArray(arguments).slice(1),_.isString(actual)||_.isArray(actual)||_.isObject(actual)?_.every(this.expected,function(expected){return _.isString(actual)&&_.isString(expected)?-1!==actual.indexOf(expected):_.isArray(actual)?(ass.Chain.isChain(expected)||(expected=ass.eq(expected)),-1!==_.findIndex(actual,expected)):1===_.where([actual],expected).length}):"got {{actual}}"}},hasOwn:{aliases:["hasKey","hasIndex"],help:["Check if the value has one or more own properties as defined by","the given arguments."],desc:"to have own property ${ expected }",test:function(actual){if(!_.isObject(actual))return"was {{actual}}";this.fail="only had {{ _.keys(actual) }}";var args=_.toArray(arguments).slice(1);return _.every(args,function(x){return _.has(actual,x)})}},log:{help:["Dumps the received value to the console."],desc:null,test:function(actual){return console.log("[ASS]",actual),!0}},dump:{help:["Dumps the received value to the console applying the given template.","Note: Use ${this} to interpolate the whole value.","See: https://lodash.com/docs#template"],desc:null,test:function(actual,tpl){var result=util.template.call(actual,tpl,actual);return console.log(result),!0}},"debugger":{help:["Halts script execution by triggering the interactive debugger."],desc:null,test:function(){return!0}},tap:{aliases:["fn"],help:["Calls the provided function with the current value as argument.","If the function returns something different to *undefined* the","expression will fork to operate on the returned value."],desc:"call {{arg1}}",test:function(actual,fn){var result=fn(actual);return"undefined"!=typeof result?this.mutate(result):!0}},notify:{help:["Similar to .tap() but it won't pass the current value as argument,","instead it will be provided as the `this` context when performing the","call. This allows it to be used with test runners `done` style callbacks.","Note that it will neither mutate the value even if it returns something."],desc:"notify {{arg1}}",test:function(actual,fn){return fn.call(actual),!0}},size:{help:["Forks the expectation to operate on the size of the current value."],desc:"get size",fail:"not has a length: {{ actual }}",test:function(actual){return _.isObject(actual)||_.isArray(actual)||_.isString(actual)?this.mutate(_.size(actual)):!1}},prop:{aliases:["key","property"],help:["Forks the expectation to operate on one of the value properties."],desc:"get property {{ arg1 }}",fail:"was not found on {{ actual }}",test:function(actual,key){return _.isObject(actual)?key in actual?this.mutate(actual[key]):(this.keys=[],_.forIn(actual,function(v,k){this.keys.push(k)},this),"was not found in keys {{ keys }}"):"got {{actual}}"}},at:{aliases:["index"],help:["Mutates the value to operate on one of the indexed elements. If","multiple indexes are provided an array is composed with them.","Note: It supports negative indexes"],desc:'get index ${ args.join(", ") }',test:function(actual){if(!_.isArray(actual)&&!_.isString(actual))return"not an array or a string: ${actual}";for(var indexes=_.toArray(arguments).slice(1),elems=[],i=0;i<indexes.length;i++){var idx=indexes[i];if(idx=0>idx?actual.length+idx:idx,0>idx||idx>=actual.length)return idx+" out of bounds for {{actual}}";elems.push(actual[idx])}return this.mutate(1===elems.length?elems[0]:elems)}},keys:{help:["Mutates the value to operate on its list of own keys."],desc:"get keys",test:function(actual){return this.mutate(_.keys(actual))}},values:{help:["Mutates the value to operate on its list of values"],desc:"get values",test:function(actual){return this.mutate(_.values(actual))}},slice:{help:["Extracts a portion from the value."],desc:"slice({{actual}}, ${arg1 || 0})",test:function(actual,start,end){return this.mutate(_.toArray(actual).slice(start,end))}},filter:{help:["Iterates over elements of the collection, forking the expectation to","operate on an array with all the elements for which the callback returned","truthy for.","See: https://lodash.com/docs#filter"],test:function(actual,callback,thisArg){return this.mutate(_.filter(actual,callback,thisArg))}},reject:{help:["Iterates over elements of collection, forking the expectation to operate","on an array with all the elements for which the callback returned falsy","for (the opposite of .filter).","See: https://lodash.com/docs#reject"],test:function(actual,callback,thisArg){return this.mutate(_.reject(actual,callback,thisArg))}},where:{help:["Performs a deep comparison of each element in a collection to the given","properties object, forking the expectation to operate on an array of all","elements that have equivalent property values.","See: https://lodash.com/docs#where"],desc:"where {{arg1}}",test:function(actual,props){return _.isPlainObject(props)?this.mutate(_.where(actual,props)):"props is not an object"}},map:{help:["Forks the expectation to operate on an array holding the results of","invoking the callback for each element in the current collection.","See: https://lodash.com/docs#map"],test:function(actual,callback,thisArg){return this.mutate(_.map(actual,callback,thisArg))}},method:{help:["Forks the expectation to operate on the result of invoking the named","method on the subject value."],desc:"method .${arg1}()",test:function(actual,method){if("function"!=typeof actual[method])return"${arg1} is not a method in {{actual}}";var args=_.toArray(arguments).slice(2);return this.mutate(actual[method].apply(actual,args))}},invoke:{help:["Forks the expectation to operate on an array holding the results of","invoking the method named by the argument for each element in the","current collection.","See: https://lodash.com/docs#invoke"],desc:"invoke .${arg1}()",test:function(){return this.mutate(_.invoke.apply(_,arguments))}},pluck:{help:["Mutates the value to be the one of the specific property for all elements","in the current collection.","See: https://lodash.com/docs#pluck"],desc:"pluck( {{arg1}} )",test:function(actual,prop){return this.mutate(_.pluck(actual,prop))}},first:{aliases:["head"],help:["TODO","See: https://lodash.com/docs#first"],desc:"get first element",test:function(actual){return this.mutate(_.head(actual))}},last:{help:["TODO","See: https://lodash.com/docs#last"],test:function(actual){return this.mutate(_.last(actual))}},rest:{aliases:["tail"],help:["TODO","See: https://lodash.com/docs#rest"],test:function(actual){return this.mutate(_.tail(actual))}},min:{help:["Mutates the subject to be the minimum value found on the collection.","See: https://lodash.com/docs#min"],test:function(actual){return this.mutate(_.min(actual))}},max:{help:["Mutates the subject to be the maximum value found on the collection.","See: https://lodash.com/docs#max"],test:function(actual){return this.mutate(_.max(actual))}},sort:{help:["Mutates the value to be sorted in ascending order.","See: https://lodash.com/docs#sortBy"],desc:"sort",test:function(actual,callback,thisArg){return callback instanceof ass.Chain&&(callback=callback.result),this.mutate(_.sortBy(actual,callback,thisArg))}},store:{help:["Helper to store a reference to the current value being evaluated in the","expression in some other object. It expects a target object and optionally","the name of a property. If target is a function it'll receive the value","using `prop` as this context. If `prop` is not provided and `target` is an","array the value will be pushed to it."],desc:"store",test:function(actual,target,prop){if(_.isFunction(target))target.call(prop,actual);else if(void 0===prop){if(!_.isArray(target))return"prop undefined and target is not an array or a function: {{arg1}}";target.push(actual)}else{if(!_.isObject(target))return"target is not an object: {{arg1}}";target[prop]=actual}return!0}}})},{"../ass":1,"../util":13,lodash:26}],8:[function(require){function resume(resolver,result){return function(value){resolver.resume(value,result)}}function isPromise(value){var then=value&&value.then;return"function"==typeof then}var _=require("lodash"),ass=require("../ass");ass.register({promise:{help:["Verifies that the value is a promise (Promise/A+) but does not attach","the expression to its resolution like `resolves` or `rejects`, instead","the original promise value is kept as the subject for the following","expectations."],desc:"to be a promise",fail:"got ${ actual }",test:function(actual){return isPromise(actual)}},resolves:{aliases:["resolved","fulfilled","fulfill","eventually"],help:["Attach the matcher to a promise value (Promises/A+) to continue","applying the chain of matchers once the promise has been resolved,","mutating the value to the resolved one.","It will fail if the value is not a promise (no .then method) or the","promise is actually rejected."],desc:"to be a resolved promise",fail:"was rejected",test:function(actual){return isPromise(actual)?function(resolver){return resolver.pause(),void actual.then(resume(resolver),resume(resolver,!1))}:"is not a promise: {{actual}}"}},become:{aliases:["becomes"],help:["Works the same as .resolves but additionally will do a comparison between","the resolved value from the promise and the expected one. It can be seen","as a shortcut for `.resolves.eq(expected)`."],desc:"to become {{ expected }}",fail:"was {{ actual }}",test:function(actual,expected){return isPromise(actual)?function(resolver){return resolver.pause(),void actual.then(function(value){var result=_.isEqual(value,expected)?void 0:!1;
resolver.resume(value,result)},resume(resolver,!1))}:"is not a promise: {{actual}}"}},rejects:{aliases:["rejected"],help:["Attach the matcher to a promise value (Promises/A+) to continue applying","the chain of matchers once the promise has been rejected, mutating the","value to become the rejected error.","It will fail if the value is not a promise (no .then method) or the","promise is actually fulfilled."],desc:"to be a rejected promise",fail:"was fulfilled",test:function(actual){return isPromise(actual)?function(resolver){return resolver.pause(),void actual.then(resume(resolver,!1),resume(resolver))}:"is not a promise: {{actual}}"}}})},{"../ass":1,lodash:26}],9:[function(require){function forker(resolver,actual,iterator,stop){var branches=_.size(actual),result=iterator(actual,function(value){var fork=resolver.fork(),partial=fork(value);return partial===stop?(resolver.join(fork),stop):partial===!stop?(branches-=1,0===branches&&resolver.join(fork),!stop):(resolver.paused||resolver.pause(),fork.finalize(function(final){return final===stop?(resolver.join(fork),resolver.resume(null,stop)):(branches-=1,0===branches&&(resolver.join(fork),resolver.resume(null,!stop))),final}),!stop)});return resolver.paused?void 0:resolver.finalize(result)}var _=require("lodash"),ass=require("../ass");ass.register({every:{aliases:["all","allOf"],help:["Applies matchers to all the elements in a collection expecting that","all of them succeed"],desc:"For every one:",fail:"one didn't",test:function(actual){return function(resolver){return resolver.exhausted?resolver.finalize(!0):forker(resolver,actual,_.every,!1)}}},some:{aliases:["anyOf"],help:["Applies matchers to all the elements in a collection expecting that","at least one of them succeeds"],desc:"At least one:",fail:"none did",test:function(actual){return function(resolver){return resolver.exhausted?resolver.finalize(!0):forker(resolver,actual,_.some,!0)}}},none:{aliases:["noneOf"],help:["Applies matchers to all the elements in a collection expecting that","none of them succeed."],desc:"None of them:",fail:"one did",test:function(actual){return function(resolver){return resolver.exhausted?resolver.finalize(!0):(resolver.finalize(function(final){return!final}),forker(resolver,actual,_.some,!0))}}}})},{"../ass":1,lodash:26}],10:[function(require,module,exports){var Chain=require("./chain"),util=require("./util"),checkChain=new Chain;exports.lodash=function(_){function cmp(a,b){return Chain.isChain(a)?a.test(b):Chain.isChain(b)?b.test(a):void 0}return _.createCallback(checkChain)===checkChain.test?_:(_.createCallback=_.wrap(_.createCallback,function(orig,callback,thisArg){if(Chain.isChain(callback))return callback.test;if(_.isPlainObject(callback)){var props=_.keys(callback);return function(object){if(null==object)return!1;for(var key,result=!1,length=props.length;length--;){if(key=props[length],!(key in object)){result=!1;break}if(result=_.isEqual(object[key],callback[key]),!result)break}return result}}return orig(callback,thisArg)}),_.isEqual=_.wrap(_.isEqual,function(orig,a,b,callback,thisArg){var result=callback?callback.call(thisArg||this,a,b):void 0;return void 0===result&&(result=orig(a,b,cmp,thisArg)),result}),_)},exports.sinon=function(sinon){if(sinon.match.isMatcher(checkChain))return sinon;var oldIsMatcher=util.bind(sinon.match.isMatcher,sinon.match);return sinon.match.isMatcher=function(obj){return Chain.isChain(obj)||oldIsMatcher(obj)},sinon}},{"./chain":2,"./util":13}],11:[function(require,module,exports){function factory(){function fn(value){return resolver.call(fn,value)}return fn.id=++created,fn.chain=null,fn.parent=null,fn.paused=!1,fn.resolved=[],fn.finalizers=[],fn.pause=pause,fn.resume=resume,fn.fork=fork,fn.join=join,fn.finalize=finalize,Object.defineProperty(fn,"exhausted",{get:function(){return this.resolved.length>=this.chain.__expectations__.length}}),fn}function resolver(value){var list,result,exp;list=this.chain.__expectations__,offset=this.resolved.length,result=!0;for(var i=offset;i<list.length;i++){if(exp=util.create(list[i],{actual:value}),this.resolved.push(exp),result=exp.result=exp.resolve(),"function"==typeof result)return exp.result=result.call(exp,this);if(result===!1)break}return this.finalize(result)}function pause(){if(this.paused)throw new Error("Resolver already paused");this.paused=!0}function resume(actual,override){if(!this.paused)throw new Error("Resolver is not currently paused");return this.paused=!1,void 0!==override?this.finalize(override):this(actual)}function fork(){var fork=acquire(this.chain);return fork.parent=this,fork.resolved=_.reject(this.resolved,Array.isArray),fork}function join(fork){var len=_.reject(this.resolved,Array.isArray).length;this.resolved.push(fork.resolved.slice(len))}function finalize(result){if("function"==typeof result)return void this.finalizers.push([result,_.last(this.resolved)]);if(void 0===result)return void 0;for(var finalizer;this.finalizers.length>0;)finalizer=this.finalizers.pop(),result=finalizer[0].call(finalizer[1],result),finalizer[1].result=result;if(this.parent||this.chain.dispatchResult(this.resolved,result),pool.push(this),pool.length>created)throw new Error("Pool corrupted! Created "+created+" but there are "+pool.length+" pooled");return result}function acquire(chain){var resolver=pool.pop()||factory();for(resolver.chain=chain,resolver.parent=null,resolver.paused=!1;resolver.resolved.length>0;)resolver.resolved.pop();for(;resolver.finalizers.length>0;)resolver.finalizers.pop();return resolver}var _=require("lodash"),util=require("./util"),pool=util.CappedPool(100),created=0;exports.acquire=acquire},{"./util":13,lodash:26}],12:[function(require,module){function should(name){if(null===name)return should.restore();if(name=name||DEFAULT_PROP,name in Object.prototype){if(!Chain.isChain(Object.prototype[name]))throw new Error("ass.should: Object.prototype already has a ."+name+" property")}else Object.defineProperty(Object.prototype,name,{get:function(){return Chain.isChain(this)?this:new Chain(this instanceof String||this instanceof Number?this.constructor(this):this instanceof Boolean?1==this:this)},set:function(value){Object.defineProperty(this,name,{value:value,enumerable:!0,configurable:!0,writable:!0})},configurable:!0,enumerable:!1}),Object.defineProperty(Chain.prototype,name,{get:function(){return this},configurable:!0})}var Chain=require("./chain"),DEFAULT_PROP="should";should.restore=function(name){name=name||DEFAULT_PROP,name in Object.prototype&&Chain.isChain(Object.prototype[name])&&(delete Object.prototype[name],delete Chain.prototype[name])},module.exports=should},{"./chain":2}],13:[function(require,module,exports){(function(process,global){function unansi(str){return str.replace(/\x1b\[(\d+;?)+[a-z]/gi,"")}function valueDumper(v){var value;return value=_.isNumber(v)||_.isNaN(v)||_.isBoolean(v)||_.isNull(v)||_.isUndefined(v)?"<"+v+">":_.isFunction(v)?v.displayName?v.displayName+"()":v.name?v.name+"()":"function"+v.name:JSON.stringify(v),"[1;36m"+value+"[0m"}function template(tpl,context){var fn=compileTemplate(tpl);if(void 0===context)return fn;var origEscape=_.escape;try{return _.escape=valueDumper,fn(context)}finally{_.escape=origEscape}}function bind(fn,thisArg){return function(){return fn.apply(thisArg,arguments)}}function create(proto,values){return 0===arguments.length?this:(create.prototype=proto,_.assign(new create,values||{}))}function sift4(s1,s2,maxOffset){if(!s1||!s1.length)return s2?s2.length:0;if(!s2||!s2.length)return s1.length;for(var l1=s1.length,l2=s2.length,c1=0,c2=0,lcss=0,local_cs=0;l1>c1&&l2>c2;){if(s1.charAt(c1)==s2.charAt(c2))local_cs++;else{lcss+=local_cs,local_cs=0,c1!=c2&&(c1=c2=Math.max(c1,c2));for(var i=0;maxOffset>i;i++){if(l1>c1+i&&s1.charAt(c1+i)===s2.charAt(c2)){c1+=i,local_cs++;break}if(l2>c2+i&&s1.charAt(c1)===s2.charAt(c2+i)){c2+=i,local_cs++;break}}}c1++,c2++}return lcss+=local_cs,Math.round(Math.max(l1,l2)-lcss)}var _=require("lodash");exports.Promise=global.Promise||require("es6-promise").Promise,exports.CappedPool=function(max){var pool=[];return max=max||Number.MAX_VALUE,Object.defineProperty(pool,"push",{value:function(v){this.length<max&&Array.prototype.push.call(this,v)}}),pool};var doColors=_.once(function(){if(void 0!==process.env.ASS_COLORS)return/true|on|yes|enabled?|1/i.test(process.env.ASS_COLORS);var Mocha=global.Mocha;if(void 0===Mocha&&require.resolve&&require.resolve("mocha")&&(Mocha=require("mocha")),void 0!==Mocha&&void 0!==Mocha.reporters&&void 0!==Mocha.reporters.Base)return Mocha.reporters.Base.useColors;if(void 0!==process.env.MOCHA_COLORS)return!0;if(/--color=always/.test(process.env.GREP_OPTIONS||""))return!0;var tty=require("tty");return tty.isatty(1)&&tty.isatty(2)}),compileTemplate=_.memoize(function(tpl){return _.template(tpl,null,{escape:/\{\{([\s\S]+?)\}\}/g})});exports.bind=bind,exports.create=create,exports.template=template,exports.unansi=unansi,exports.doColors=doColors,exports.sift4=sift4}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:17,"es6-promise":20,lodash:26,mocha:void 0,tty:15}],14:[function(require,module){(function(global){var ass=require("./lib/ass"),Chain=require("./lib/chain"),AssError=require("./lib/error"),should=require("./lib/should"),patches=require("./lib/patches");require("./lib/matchers/core"),require("./lib/matchers/coordination"),require("./lib/matchers/quantifiers"),require("./lib/matchers/promise"),ass.Chain=Chain,ass.Error=AssError,ass.patches=patches,ass.should=function(){return should(arguments.length>0?arguments[0]:void 0),ass},ass.should.restore=function(){return should.restore(arguments.length>0?arguments[0]:void 0),ass},patches.lodash(require("lodash")),global.sinon&&global.sinon.match?patches.sinon(global.sinon):require.resolve&&require.resolve("sinon")&&patches.sinon(require("sinon")),module.exports=ass}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/ass":1,"./lib/chain":2,"./lib/error":3,"./lib/matchers/coordination":6,"./lib/matchers/core":7,"./lib/matchers/promise":8,"./lib/matchers/quantifiers":9,"./lib/patches":10,"./lib/should":12,lodash:26,sinon:27}],15:[function(){},{}],16:[function(require,module){module.exports="function"==typeof Object.create?function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},{}],17:[function(require,module){function noop(){}var process=module.exports={};process.nextTick=function(){var canSetImmediate="undefined"!=typeof window&&window.setImmediate,canMutationObserver="undefined"!=typeof window&&window.MutationObserver,canPost="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(canSetImmediate)return function(f){return window.setImmediate(f)};var queue=[];if(canMutationObserver){var hiddenDiv=document.createElement("div"),observer=new MutationObserver(function(){var queueList=queue.slice();queue.length=0,queueList.forEach(function(fn){fn()})});return observer.observe(hiddenDiv,{attributes:!0}),function(fn){queue.length||hiddenDiv.setAttribute("yes","no"),queue.push(fn)}}return canPost?(window.addEventListener("message",function(ev){var source=ev.source;if((source===window||null===source)&&"process-tick"===ev.data&&(ev.stopPropagation(),queue.length>0)){var fn=queue.shift();fn()}},!0),function(fn){queue.push(fn),window.postMessage("process-tick","*")}):function(fn){setTimeout(fn,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")}},{}],18:[function(require,module){module.exports=function(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}},{}],19:[function(require,module,exports){(function(process,global){function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str){return str}function arrayToHash(array){var hash={};return array.forEach(function(val){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"];if(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0===keys.length&&(!array||0==value.length))return braces[0]+base+braces[1];if(0>recurseTimes)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special");ctx.seen.push(value);var output;return output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}return isNumber(value)?ctx.stylize(""+value,"number"):isBoolean(value)?ctx.stylize(""+value,"boolean"):isNull(value)?ctx.stylize("null","null"):void 0}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;l>i;++i)output.push(hasOwnProperty(value,String(i))?formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0):"");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]},desc.get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1),str.indexOf("\n")>-1&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2):"\n"+str.split("\n").map(function(line){return"   "+line}).join("\n"))):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;name=JSON.stringify(""+key),name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0,length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf("\n")>=0&&numLinesEst++,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);return length>60?braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||"undefined"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return 10>n?"0"+n.toString(10):n.toString(10)}function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];len>i;x=args[++i])str+=isNull(x)||!isObject(x)?" "+x:" "+inspect(x);return str},exports.deprecate=function(fn,msg){function deprecated(){if(!warned){if(process.throwDeprecation)throw new Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(fn,msg).apply(this,arguments)};if(process.noDeprecation===!0)return fn;var warned=!1;return deprecated};var debugEnviron,debugs={};exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),set=set.toUpperCase(),!debugs[set])if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":18,_process:17,inherits:16}],20:[function(require,module){(function(process,global){(function(){"use strict";function $$utils$$objectOrFunction(x){return"function"==typeof x||"object"==typeof x&&null!==x}function $$utils$$isFunction(x){return"function"==typeof x}function $$utils$$isMaybeThenable(x){return"object"==typeof x&&null!==x}function $$utils$$F(){}function $$asap$$useNextTick(){return function(){process.nextTick($$asap$$flush)}}function $$asap$$useMutationObserver(){var iterations=0,observer=new $$asap$$BrowserMutationObserver($$asap$$flush),node=document.createTextNode("");return observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}}function $$asap$$useMessageChannel(){var channel=new MessageChannel;return channel.port1.onmessage=$$asap$$flush,function(){channel.port2.postMessage(0)}}function $$asap$$useSetTimeout(){return function(){setTimeout($$asap$$flush,1)}}function $$asap$$flush(){for(var i=0;$$asap$$len>i;i+=2){var callback=$$asap$$queue[i],arg=$$asap$$queue[i+1];callback(arg),$$asap$$queue[i]=void 0,$$asap$$queue[i+1]=void 0}$$asap$$len=0}function $$$internal$$noop(){}function $$$internal$$selfFullfillment(){return new TypeError("You cannot resolve a promise with itself")}function $$$internal$$cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function $$$internal$$getThen(promise){try{return promise.then}catch(error){return $$$internal$$GET_THEN_ERROR.error=error,$$$internal$$GET_THEN_ERROR}}function $$$internal$$tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function $$$internal$$handleForeignThenable(promise,thenable,then){$$asap$$default(function(promise){var sealed=!1,error=$$$internal$$tryThen(then,thenable,function(value){sealed||(sealed=!0,thenable!==value?$$$internal$$resolve(promise,value):$$$internal$$fulfill(promise,value))},function(reason){sealed||(sealed=!0,$$$internal$$reject(promise,reason))},"Settle: "+(promise._label||" unknown promise"));!sealed&&error&&(sealed=!0,$$$internal$$reject(promise,error))},promise)}function $$$internal$$handleOwnThenable(promise,thenable){thenable._state===$$$internal$$FULFILLED?$$$internal$$fulfill(promise,thenable._result):promise._state===$$$internal$$REJECTED?$$$internal$$reject(promise,thenable._result):$$$internal$$subscribe(thenable,void 0,function(value){$$$internal$$resolve(promise,value)},function(reason){$$$internal$$reject(promise,reason)})}function $$$internal$$handleMaybeThenable(promise,maybeThenable){if(maybeThenable.constructor===promise.constructor)$$$internal$$handleOwnThenable(promise,maybeThenable);else{var then=$$$internal$$getThen(maybeThenable);then===$$$internal$$GET_THEN_ERROR?$$$internal$$reject(promise,$$$internal$$GET_THEN_ERROR.error):void 0===then?$$$internal$$fulfill(promise,maybeThenable):$$utils$$isFunction(then)?$$$internal$$handleForeignThenable(promise,maybeThenable,then):$$$internal$$fulfill(promise,maybeThenable)}}function $$$internal$$resolve(promise,value){promise===value?$$$internal$$reject(promise,$$$internal$$selfFullfillment()):$$utils$$objectOrFunction(value)?$$$internal$$handleMaybeThenable(promise,value):$$$internal$$fulfill(promise,value)}function $$$internal$$publishRejection(promise){promise._onerror&&promise._onerror(promise._result),$$$internal$$publish(promise)}function $$$internal$$fulfill(promise,value){promise._state===$$$internal$$PENDING&&(promise._result=value,promise._state=$$$internal$$FULFILLED,0===promise._subscribers.length||$$asap$$default($$$internal$$publish,promise))}function $$$internal$$reject(promise,reason){promise._state===$$$internal$$PENDING&&(promise._state=$$$internal$$REJECTED,promise._result=reason,$$asap$$default($$$internal$$publishRejection,promise))}function $$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers,length=subscribers.length;parent._onerror=null,subscribers[length]=child,subscribers[length+$$$internal$$FULFILLED]=onFulfillment,subscribers[length+$$$internal$$REJECTED]=onRejection,0===length&&parent._state&&$$asap$$default($$$internal$$publish,parent)}function $$$internal$$publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child,callback,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?$$$internal$$invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function $$$internal$$ErrorObject(){this.error=null}function $$$internal$$tryCatch(callback,detail){try{return callback(detail)}catch(e){return $$$internal$$TRY_CATCH_ERROR.error=e,$$$internal$$TRY_CATCH_ERROR}}function $$$internal$$invokeCallback(settled,promise,callback,detail){var value,error,succeeded,failed,hasCallback=$$utils$$isFunction(callback);if(hasCallback){if(value=$$$internal$$tryCatch(callback,detail),value===$$$internal$$TRY_CATCH_ERROR?(failed=!0,error=value.error,value=null):succeeded=!0,promise===value)return void $$$internal$$reject(promise,$$$internal$$cannotReturnOwn())}else value=detail,succeeded=!0;promise._state!==$$$internal$$PENDING||(hasCallback&&succeeded?$$$internal$$resolve(promise,value):failed?$$$internal$$reject(promise,error):settled===$$$internal$$FULFILLED?$$$internal$$fulfill(promise,value):settled===$$$internal$$REJECTED&&$$$internal$$reject(promise,value))}function $$$internal$$initializePromise(promise,resolver){try{resolver(function(value){$$$internal$$resolve(promise,value)},function(reason){$$$internal$$reject(promise,reason)})}catch(e){$$$internal$$reject(promise,e)}}function $$$enumerator$$Enumerator(Constructor,input,abortOnReject,label){this._instanceConstructor=Constructor,this.promise=new Constructor($$$internal$$noop,label),this._abortOnReject=abortOnReject,this._validateInput(input)?(this._input=input,this.length=input.length,this._remaining=input.length,this._init(),0===this.length?$$$internal$$fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&$$$internal$$fulfill(this.promise,this._result))):$$$internal$$reject(this.promise,this._validationError())}function $$es6$promise$promise$$needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $$es6$promise$promise$$needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function $$es6$promise$promise$$Promise(resolver){this._id=$$es6$promise$promise$$counter++,this._state=void 0,this._result=void 0,this._subscribers=[],$$$internal$$noop!==resolver&&($$utils$$isFunction(resolver)||$$es6$promise$promise$$needsResolver(),this instanceof $$es6$promise$promise$$Promise||$$es6$promise$promise$$needsNew(),$$$internal$$initializePromise(this,resolver))}var $$utils$$_isArray;$$utils$$_isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)};var $$asap$$scheduleFlush,$$utils$$isArray=$$utils$$_isArray,$$asap$$len=(Date.now||function(){return(new Date).getTime()},Object.create||function(o){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof o)throw new TypeError("Argument must be an object");return $$utils$$F.prototype=o,new $$utils$$F},0),$$asap$$default=function(callback,arg){$$asap$$queue[$$asap$$len]=callback,$$asap$$queue[$$asap$$len+1]=arg,$$asap$$len+=2,2===$$asap$$len&&$$asap$$scheduleFlush()},$$asap$$browserGlobal="undefined"!=typeof window?window:{},$$asap$$BrowserMutationObserver=$$asap$$browserGlobal.MutationObserver||$$asap$$browserGlobal.WebKitMutationObserver,$$asap$$isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$$asap$$queue=new Array(1e3);$$asap$$scheduleFlush="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?$$asap$$useNextTick():$$asap$$BrowserMutationObserver?$$asap$$useMutationObserver():$$asap$$isWorker?$$asap$$useMessageChannel():$$asap$$useSetTimeout();var $$$internal$$PENDING=void 0,$$$internal$$FULFILLED=1,$$$internal$$REJECTED=2,$$$internal$$GET_THEN_ERROR=new $$$internal$$ErrorObject,$$$internal$$TRY_CATCH_ERROR=new $$$internal$$ErrorObject;$$$enumerator$$Enumerator.prototype._validateInput=function(input){return $$utils$$isArray(input)},$$$enumerator$$Enumerator.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},$$$enumerator$$Enumerator.prototype._init=function(){this._result=new Array(this.length)};var $$$enumerator$$default=$$$enumerator$$Enumerator;$$$enumerator$$Enumerator.prototype._enumerate=function(){for(var length=this.length,promise=this.promise,input=this._input,i=0;promise._state===$$$internal$$PENDING&&length>i;i++)this._eachEntry(input[i],i)},$$$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;$$utils$$isMaybeThenable(entry)?entry.constructor===c&&entry._state!==$$$internal$$PENDING?(entry._onerror=null,this._settledAt(entry._state,i,entry._result)):this._willSettleAt(c.resolve(entry),i):(this._remaining--,this._result[i]=this._makeResult($$$internal$$FULFILLED,i,entry))},$$$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;promise._state===$$$internal$$PENDING&&(this._remaining--,this._abortOnReject&&state===$$$internal$$REJECTED?$$$internal$$reject(promise,value):this._result[i]=this._makeResult(state,i,value)),0===this._remaining&&$$$internal$$fulfill(promise,this._result)},$$$enumerator$$Enumerator.prototype._makeResult=function(state,i,value){return value},$$$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;$$$internal$$subscribe(promise,void 0,function(value){enumerator._settledAt($$$internal$$FULFILLED,i,value)},function(reason){enumerator._settledAt($$$internal$$REJECTED,i,reason)})};var $$promise$all$$default=function(entries,label){return new $$$enumerator$$default(this,entries,!0,label).promise},$$promise$race$$default=function(entries,label){function onFulfillment(value){$$$internal$$resolve(promise,value)}function onRejection(reason){$$$internal$$reject(promise,reason)}var Constructor=this,promise=new Constructor($$$internal$$noop,label);if(!$$utils$$isArray(entries))return $$$internal$$reject(promise,new TypeError("You must pass an array to race.")),promise;for(var length=entries.length,i=0;promise._state===$$$internal$$PENDING&&length>i;i++)$$$internal$$subscribe(Constructor.resolve(entries[i]),void 0,onFulfillment,onRejection);return promise},$$promise$resolve$$default=function(object,label){var Constructor=this;
if(object&&"object"==typeof object&&object.constructor===Constructor)return object;var promise=new Constructor($$$internal$$noop,label);return $$$internal$$resolve(promise,object),promise},$$promise$reject$$default=function(reason,label){var Constructor=this,promise=new Constructor($$$internal$$noop,label);return $$$internal$$reject(promise,reason),promise},$$es6$promise$promise$$counter=0,$$es6$promise$promise$$default=$$es6$promise$promise$$Promise;$$es6$promise$promise$$Promise.all=$$promise$all$$default,$$es6$promise$promise$$Promise.race=$$promise$race$$default,$$es6$promise$promise$$Promise.resolve=$$promise$resolve$$default,$$es6$promise$promise$$Promise.reject=$$promise$reject$$default,$$es6$promise$promise$$Promise.prototype={constructor:$$es6$promise$promise$$Promise,then:function(onFulfillment,onRejection){var parent=this,state=parent._state;if(state===$$$internal$$FULFILLED&&!onFulfillment||state===$$$internal$$REJECTED&&!onRejection)return this;var child=new this.constructor($$$internal$$noop),result=parent._result;if(state){var callback=arguments[state-1];$$asap$$default(function(){$$$internal$$invokeCallback(state,child,callback,result)})}else $$$internal$$subscribe(parent,child,onFulfillment,onRejection);return child},"catch":function(onRejection){return this.then(null,onRejection)}};var $$es6$promise$polyfill$$default=function(){var local;local="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var es6PromiseSupport="Promise"in local&&"resolve"in local.Promise&&"reject"in local.Promise&&"all"in local.Promise&&"race"in local.Promise&&function(){var resolve;return new local.Promise(function(r){resolve=r}),$$utils$$isFunction(resolve)}();es6PromiseSupport||(local.Promise=$$es6$promise$promise$$default)},es6$promise$umd$$ES6Promise={Promise:$$es6$promise$promise$$default,polyfill:$$es6$promise$polyfill$$default};"function"==typeof define&&define.amd?define(function(){return es6$promise$umd$$ES6Promise}):"undefined"!=typeof module&&module.exports?module.exports=es6$promise$umd$$ES6Promise:"undefined"!=typeof this&&(this.ES6Promise=es6$promise$umd$$ES6Promise)}).call(this)}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:17}],21:[function(require,module){function CallSite(frame){return this instanceof CallSite?void(this.frame=frame):new CallSite(frame)}CallSite.prototype=Object.create({getLineNumber:function(){return this.frame.lineNumber},getColumnNumber:function(){return this.frame.columnNumber},getFileName:function(){return this.frame.fileName},getFunction:function(){return this.frame["function"]},getThis:function(){return null},getTypeName:function(){return null},getMethodName:function(){return this.frame.functionName?this.frame.functionName.split(".").pop():null},getFunctionName:function(){return this.frame.functionName},getEvalOrigin:function(){return null},isToplevel:function(){return!1},isEval:function(){return!1},isNative:function(){return!1},isConstructor:function(){return/^new(\s|$)/.test(this.frame.functionName)},toString:function(){var name=this.getFunctionName()||"<anonymous>",loc=this.getFileName()+":"+this.getLineNumber()+":"+this.getColumnNumber();return name+" ("+loc+")"}}),module.exports=CallSite},{}],22:[function(require,module){(function(process,global){function Failure(message,sff){return this instanceof Failure?(this.sff=sff||this.constructor,this.message=message,this._getFrames=makeFramesGetter(this.sff),"function"!=typeof Object.defineProperty&&(this.frames=unwind(this._getFrames()),this._getFrames(!0),this._getFrames=null,this.stack=this.generateStackTrace()),this):new Failure(message,sff||Failure)}function trim(frames,sff){for(var fn,name=sff.name,i=0;i<frames.length;i++)if(fn=frames[i].getFunction(),fn&&fn===sff||name&&name===frames[i].getFunctionName())return frames.slice(i+1);return frames}function unwind(frames){for(var fn,result=[],i=0;i<frames.length;i++)if(fn=frames[i].getFunction(),fn&&fn["failure:ignore"]||result.push(frames[i]),fn&&fn["failure:frames"]){if(Failure.FRAME_EMPTY&&result.push(null),"function"==typeof fn["failure:frames"]){var getter=fn["failure:frames"];fn["failure:frames"]=null,fn["failure:frames"]=getter()}result.push.apply(result,unwind(fn["failure:frames"]));break}return result}function makeFramesGetterV8(sff){NativeError.captureStackTrace(V8FRAMES,sff||makeFramesGetterV8),sff=null;var frames=V8FRAMES.stack;return V8FRAMES.stack=null,function(){var result=frames;return frames=null,result}}function makeFramesGetterCompat(sff){for(var error=getErrorWithStack(),caller=arguments.callee,functions=[getErrorWithStack],i=0;caller&&10>i&&(functions.push(caller),caller.caller!==caller);i++)caller=caller.caller;return caller=null,function(cleanup){var frames=null;if(!cleanup){frames=ErrorStackParser.parse(error);for(var i=2;i<frames.length;i++)frames[i]["function"]=functions[i],frames[i]=new CallSite(frames[i]);frames=trim(frames.slice(2),sff)}return sff=null,error=null,functions=null,frames}}function exclude(ctor,predicate){var fn=predicate;"string"==typeof predicate?fn=function(frame){return-1!==frame.getFileName().indexOf(predicate)}:"function"==typeof predicate.test&&(fn=function(frame){return predicate.test(frame.getFileName())}),ctor.excludes.push(fn)}var ErrorStackParser=require("error-stack-parser"),CallSite=require("./call-site"),NativeError=Error;Failure.FRAME_EMPTY="  ----------------------------------------",Failure.FRAME_PREFIX="  at ",Failure.TRACK=!0;var getErrorWithStack=function(){return new NativeError};getErrorWithStack().stack||(getErrorWithStack=function(){try{throw new NativeError}catch(e){return e}});var V8FRAMES={},makeFramesGetter="function"==typeof NativeError.captureStackTrace?makeFramesGetterV8:makeFramesGetterCompat,oldPrepareStackTrace=Error.prepareStackTrace;Error.prepareStackTrace=function(error,frames){return error===V8FRAMES?frames:oldPrepareStackTrace?oldPrepareStackTrace.call(Error,error,frames):Failure.prototype.prepareStackTrace.call(error,unwind(frames))},Failure.excludes=[],Failure.exclude=function(predicate){exclude(Failure,predicate)},Failure.track=function Failure_track(fn,sff){return"function"!=typeof fn?fn:("function"==typeof fn["failure:frames"]&&fn["failure:frames"](!0),Failure.TRACK&&(fn["failure:frames"]=null,fn["failure:frames"]=makeFramesGetter(sff||Failure_track)),fn)},Failure.wrap=function Failure_wrap(fn){var wrapper=Failure.ignore(function(){return fn.apply(this,arguments)});return Failure.track(wrapper,Failure_wrap)},Failure.ignore=function(fn){return fn["failure:ignore"]=!0,fn},Failure.setTimeout=function Failure_setTimeout(){return arguments[0]=Failure.track(arguments[0],Failure_setTimeout),setTimeout.apply(null,arguments)},Failure.nextTick=function Failure_nextTick(){return arguments[0]=Failure.track(arguments[0],Failure_nextTick),process.nextTick.apply(process,arguments)},Failure.patch=function(obj,name,idx){if(obj&&"function"!=typeof obj[name])throw new Error('Object does not have a "'+name+'" method');var original=obj[name];obj[name]="number"==typeof idx?function(){return arguments[idx]=Failure.track(arguments[idx],obj[name]),original.apply(this,arguments)}:function(){for(var i=0;i<arguments.length;i++)"function"==typeof arguments[i]&&(arguments[i]=Failure.track(arguments[i],obj[name]));return original.apply(this,arguments)};for(var k in original)original.hasOwnProperty(k)&&(obj[name][k]=original[k]);return obj[name]},Failure.create=function(name,props){function ctor(message,sff){return this instanceof Failure?void Failure.apply(this,arguments):new ctor(message,sff)}if("string"!=typeof name)throw new Failure("Expected a name as first argument");return ctor.excludes=[],ctor.exclude=function(predicate){exclude(ctor,predicate)},ctor.prototype=Object.create(Failure.prototype),ctor.prototype.constructor=ctor,ctor.prototype.name=name,"function"==typeof props?ctor.prototype.prepareStackTrace=props:props&&Object.keys(props).forEach(function(prop){ctor.prototype[prop]=prop}),ctor};var builtinErrorTypes=["Error","TypeError","RangeError","ReferenceError","SyntaxError","EvalError","URIError","InternalError"],builtinErrors={};Failure.install=function(){var root="object"==typeof window?window:global;return builtinErrorTypes.forEach(function(type){root[type]&&!builtinErrors[type]&&(builtinErrors[type]=root[type],root[type]=Failure.create(type))}),Failure},Failure.uninstall=function(){builtinErrorTypes.forEach(function(type){root[type]=builtinErrors[type]||root[type]})};var proto=Failure.prototype=Object.create(Error.prototype);proto.constructor=Failure,proto.name="Failure",proto.message="","function"==typeof Object.defineProperty&&(Object.defineProperty(proto,"frames",{get:function(){var frames=unwind(trim(this._getFrames(),this.sff));return Object.defineProperty(this,"frames",{value:frames,writable:!0}),this._getFrames=null,frames}}),Object.defineProperty(proto,"stack",{get:function(){return this.generateStackTrace()}})),proto.generateStackTrace=function(){var include,excludes=this.constructor.excludes,frames=[];excludes!==Failure.excludes&&excludes.push.apply(excludes,Failure.excludes);for(var i=0;i<this.frames.length;i++){if(include=!0,this.frames[i])for(var j=0;include&&j<excludes.length;j++)include&=!excludes[j].call(this,this.frames[i]);include&&frames.push(this.frames[i])}return this.prepareStackTrace(frames)},proto.prepareStackTrace=function(frames){for(var lines=[this],i=0;i<frames.length;i++)lines.push(frames[i]?Failure.FRAME_PREFIX+frames[i]:Failure.FRAME_EMPTY);return lines.join("\n")},module.exports=Failure}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./call-site":21,_process:17,"error-stack-parser":24}],23:[function(require,module){var Failure=require("./lib/failure");module.exports=Failure},{"./lib/failure":22}],24:[function(require,module,exports){!function(root,factory){"use strict";"function"==typeof define&&define.amd?define("error-stack-parser",["stackframe"],factory):"object"==typeof exports?module.exports=factory(require("stackframe")):root.ErrorStackParser=factory(root.StackFrame)}(this,function(StackFrame){"use strict";Array.prototype.map||(Array.prototype.map=function(callback,thisArg){var T,O=Object(this),len=O.length>>>0;arguments.length>1&&(T=thisArg);for(var A=new Array(len),k=0;len>k;){var kValue,mappedValue;k in O&&(kValue=O[k],mappedValue=callback.call(T,kValue,k,O),A[k]=mappedValue),k++}return A}),Array.prototype.filter||(Array.prototype.filter=function(callback){for(var t=Object(this),len=t.length>>>0,res=[],thisArg=arguments.length>=2?arguments[1]:void 0,i=0;len>i;i++)if(i in t){var val=t[i];callback.call(thisArg,val,i,t)&&res.push(val)}return res});var FIREFOX_SAFARI_STACK_REGEXP=/\S+\:\d+/,CHROME_IE_STACK_REGEXP=/\s+at /;return{parse:function(error){if("undefined"!=typeof error.stacktrace||"undefined"!=typeof error["opera#sourceloc"])return this.parseOpera(error);if(error.stack&&error.stack.match(CHROME_IE_STACK_REGEXP))return this.parseV8OrIE(error);if(error.stack&&error.stack.match(FIREFOX_SAFARI_STACK_REGEXP))return this.parseFFOrSafari(error);throw new Error("Cannot parse given Error object")},extractLocation:function(urlLike){var locationParts=urlLike.split(":"),lastNumber=locationParts.pop(),possibleNumber=locationParts[locationParts.length-1];if(!isNaN(parseFloat(possibleNumber))&&isFinite(possibleNumber)){var lineNumber=locationParts.pop();return[locationParts.join(":"),lineNumber,lastNumber]}return[locationParts.join(":"),lastNumber,void 0]},parseV8OrIE:function(error){return error.stack.split("\n").slice(1).map(function(line){var tokens=line.replace(/^\s+/,"").split(/\s+/).slice(1),locationParts=this.extractLocation(tokens.pop().replace(/[\(\)\s]/g,"")),functionName=tokens[0]&&"Anonymous"!==tokens[0]?tokens[0]:void 0;return new StackFrame(functionName,void 0,locationParts[0],locationParts[1],locationParts[2])},this)},parseFFOrSafari:function(error){return error.stack.split("\n").filter(function(line){return!!line.match(FIREFOX_SAFARI_STACK_REGEXP)},this).map(function(line){var tokens=line.split("@"),locationParts=this.extractLocation(tokens.pop()),functionName=tokens.shift()||void 0;return new StackFrame(functionName,void 0,locationParts[0],locationParts[1],locationParts[2])},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var lineRE=/Line (\d+).*script (?:in )?(\S+)/i,lines=e.message.split("\n"),result=[],i=2,len=lines.length;len>i;i+=2){var match=lineRE.exec(lines[i]);match&&result.push(new StackFrame(void 0,void 0,match[2],match[1]))}return result},parseOpera10:function(e){for(var lineRE=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,lines=e.stacktrace.split("\n"),result=[],i=0,len=lines.length;len>i;i+=2){var match=lineRE.exec(lines[i]);match&&result.push(new StackFrame(match[3]||void 0,void 0,match[2],match[1]))}return result},parseOpera11:function(error){return error.stack.split("\n").filter(function(line){return!!line.match(FIREFOX_SAFARI_STACK_REGEXP)&&!line.match(/^Error created at/)},this).map(function(line){var argsRaw,tokens=line.split("@"),locationParts=this.extractLocation(tokens.pop()),functionCall=tokens.shift()||"",functionName=functionCall.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;functionCall.match(/\(([^\)]*)\)/)&&(argsRaw=functionCall.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var args=void 0===argsRaw||"[arguments not available]"===argsRaw?void 0:argsRaw.split(",");return new StackFrame(functionName,args,locationParts[0],locationParts[1],locationParts[2])},this)}}})},{stackframe:25}],25:[function(require,module,exports){!function(root,factory){"use strict";"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?module.exports=factory():root.StackFrame=factory()}(this,function(){"use strict";function _isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function StackFrame(functionName,args,fileName,lineNumber,columnNumber){void 0!==functionName&&this.setFunctionName(functionName),void 0!==args&&this.setArgs(args),void 0!==fileName&&this.setFileName(fileName),void 0!==lineNumber&&this.setLineNumber(lineNumber),void 0!==columnNumber&&this.setColumnNumber(columnNumber)}return StackFrame.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(v){this.functionName=String(v)},getArgs:function(){return this.args},setArgs:function(v){if("[object Array]"!==Object.prototype.toString.call(v))throw new TypeError("Args must be an Array");this.args=v},getFileName:function(){return this.fileName},setFileName:function(v){this.fileName=String(v)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(v){if(!_isNumber(v))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(v)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(v){if(!_isNumber(v))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(v)},toString:function(){var functionName=this.getFunctionName()||"{anonymous}",args="("+(this.getArgs()||[]).join(",")+")",fileName=this.getFileName()?"@"+this.getFileName():"",lineNumber=_isNumber(this.getLineNumber())?":"+this.getLineNumber():"",columnNumber=_isNumber(this.getColumnNumber())?":"+this.getColumnNumber():"";return functionName+args+fileName+lineNumber+columnNumber}},StackFrame})},{}],26:[function(require,module,exports){(function(global){(function(){function baseIndexOf(array,value,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0;++index<length;)if(array[index]===value)return index;return-1}function cacheIndexOf(cache,value){var type=typeof value;if(cache=cache.cache,"boolean"==type||null==value)return cache[value]?0:-1;"number"!=type&&"string"!=type&&(type="object");var key="number"==type?value:keyPrefix+value;return cache=(cache=cache[type])&&cache[key],"object"==type?cache&&baseIndexOf(cache,value)>-1?0:-1:cache?0:-1}function cachePush(value){var cache=this.cache,type=typeof value;if("boolean"==type||null==value)cache[value]=!0;else{"number"!=type&&"string"!=type&&(type="object");var key="number"==type?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});"object"==type?(typeCache[key]||(typeCache[key]=[])).push(value):typeCache[key]=!0}}function charAtCallback(value){return value.charCodeAt(0)}function compareAscending(a,b){for(var ac=a.criteria,bc=b.criteria,index=-1,length=ac.length;++index<length;){var value=ac[index],other=bc[index];if(value!==other){if(value>other||"undefined"==typeof value)return 1;if(other>value||"undefined"==typeof other)return-1}}return a.index-b.index}function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[length/2|0],last=array[length-1];if(first&&"object"==typeof first&&mid&&"object"==typeof mid&&last&&"object"==typeof last)return!1;var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache.undefined=!1;var result=getObject();for(result.array=array,result.cache=cache,result.push=cachePush;++index<length;)result.push(array[index]);return result}function escapeStringChar(match){return"\\"+stringEscapes[match]}function getArray(){return arrayPool.pop()||[]}function getObject(){return objectPool.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function releaseArray(array){array.length=0,arrayPool.length<maxPoolSize&&arrayPool.push(array)}function releaseObject(object){var cache=object.cache;cache&&releaseObject(cache),object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null,objectPool.length<maxPoolSize&&objectPool.push(object)}function slice(array,start,end){start||(start=0),"undefined"==typeof end&&(end=array?array.length:0);for(var index=-1,length=end-start||0,result=Array(0>length?0:length);++index<length;)result[index]=array[start+index];return result}function runInContext(context){function lodash(value){return value&&"object"==typeof value&&!isArray(value)&&hasOwnProperty.call(value,"__wrapped__")?value:new lodashWrapper(value)}function lodashWrapper(value,chainAll){this.__chain__=!!chainAll,this.__wrapped__=value}function baseBind(bindData){function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];return setBindData(bound,bindData),bound}function baseClone(value,isDeep,callback,stackA,stackB){if(callback){var result=callback(value);if("undefined"!=typeof result)return result}var isObj=isObject(value);if(!isObj)return value;var className=toString.call(value);if(!cloneableClasses[className])return value;var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+value);case numberClass:case stringClass:return new ctor(value);case regexpClass:return result=ctor(value.source,reFlags.exec(value)),result.lastIndex=value.lastIndex,result}var isArr=isArray(value);if(isDeep){var initedStack=!stackA;stackA||(stackA=getArray()),stackB||(stackB=getArray());for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];result=isArr?ctor(value.length):{}}else result=isArr?slice(value):assign({},value);return isArr&&(hasOwnProperty.call(value,"index")&&(result.index=value.index),hasOwnProperty.call(value,"input")&&(result.input=value.input)),isDeep?(stackA.push(value),stackB.push(result),(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=baseClone(objValue,isDeep,callback,stackA,stackB)}),initedStack&&(releaseArray(stackA),releaseArray(stackB)),result):result}function baseCreate(prototype){return isObject(prototype)?nativeCreate(prototype):{}}function baseCreateCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if("undefined"==typeof thisArg||!("prototype"in func))return func;var bindData=func.__bindData__;if("undefined"==typeof bindData&&(support.funcNames&&(bindData=!func.name),bindData=bindData||!support.funcDecomp,!bindData)){var source=fnToString.call(func);support.funcNames||(bindData=!reFuncName.test(source)),bindData||(bindData=reThis.test(source),setBindData(func,bindData))}if(bindData===!1||bindData!==!0&&1&bindData[1])return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}function baseCreateWrapper(bindData){function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if((partialRightArgs||isCurry)&&(args||(args=slice(arguments)),partialRightArgs&&push.apply(args,partialRightArgs),isCurry&&args.length<arity))return bitmask|=16,baseCreateWrapper([func,isCurryBound?bitmask:-4&bitmask,args,null,thisArg,arity]);if(args||(args=arguments),isBindKey&&(func=thisBinding[key]),this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5],isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isCurryBound=8&bitmask,key=func;return setBindData(bound,bindData),bound}function baseDifference(array,values){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,isLarge=length>=largeArraySize&&indexOf===baseIndexOf,result=[];if(isLarge){var cache=createCache(values);cache?(indexOf=cacheIndexOf,values=cache):isLarge=!1}for(;++index<length;){var value=array[index];indexOf(values,value)<0&&result.push(value)}return isLarge&&releaseObject(values),result}function baseFlatten(array,isShallow,isStrict,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];if(value&&"object"==typeof value&&"number"==typeof value.length&&(isArray(value)||isArguments(value))){isShallow||(value=baseFlatten(value,isShallow,isStrict));var valIndex=-1,valLength=value.length,resIndex=result.length;for(result.length+=valLength;++valIndex<valLength;)result[resIndex++]=value[valIndex]}else isStrict||result.push(value)}return result}function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if("undefined"!=typeof result)return!!result}if(a===b)return 0!==a||1/a==1/b;var type=typeof a,otherType=typeof b;if(!(a!==a||a&&objectTypes[type]||b&&objectTypes[otherType]))return!1;if(null==a||null==b)return a===b;var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass&&(className=objectClass),otherClass==argsClass&&(otherClass=objectClass),className!=otherClass)return!1;switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,"__wrapped__"),bWrapped=hasOwnProperty.call(b,"__wrapped__");if(aWrapped||bWrapped)return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB);if(className!=objectClass)return!1;var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&"constructor"in a&&"constructor"in b)return!1}var initedStack=!stackA;stackA||(stackA=getArray()),stackB||(stackB=getArray());for(var length=stackA.length;length--;)if(stackA[length]==a)return stackB[length]==b;var size=0;if(result=!0,stackA.push(a),stackB.push(b),isArr){if(length=a.length,size=b.length,result=size==length,result||isWhere)for(;size--;){var index=length,value=b[size];if(isWhere)for(;index--&&!(result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB)););else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB)))break}}else forIn(b,function(value,key,b){return hasOwnProperty.call(b,key)?(size++,result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB)):void 0}),result&&!isWhere&&forIn(a,function(value,key,a){return hasOwnProperty.call(a,key)?result=--size>-1:void 0});return stackA.pop(),stackB.pop(),initedStack&&(releaseArray(stackA),releaseArray(stackB)),result}function baseMerge(object,source,callback,stackA,stackB){(isArray(source)?forEach:forOwn)(source,function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){for(var stackLength=stackA.length;stackLength--;)if(found=stackA[stackLength]==source){value=stackB[stackLength];break}if(!found){var isShallow;callback&&(result=callback(value,source),(isShallow="undefined"!=typeof result)&&(value=result)),isShallow||(value=isArr?isArray(value)?value:[]:isPlainObject(value)?value:{}),stackA.push(source),stackB.push(value),isShallow||baseMerge(value,source,callback,stackA,stackB)}}else callback&&(result=callback(value,source),"undefined"==typeof result&&(result=source)),"undefined"!=typeof result&&(value=result);object[key]=value})}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseUniq(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[],isLarge=!isSorted&&length>=largeArraySize&&indexOf===baseIndexOf,seen=callback||isLarge?getArray():result;if(isLarge){var cache=createCache(seen);indexOf=cacheIndexOf,seen=cache}for(;++index<length;){var value=array[index],computed=callback?callback(value,index,array):value;(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0)&&((callback||isLarge)&&seen.push(computed),result.push(value))}return isLarge?(releaseArray(seen.array),releaseObject(seen)):callback&&releaseArray(seen),result}function createAggregator(setter){return function(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];setter(result,value,callback(value,index,collection),collection)}else forOwn(collection,function(value,key,collection){setter(result,value,callback(value,key,collection),collection)});return result}}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isPartial=16&bitmask,isPartialRight=32&bitmask;if(!isBindKey&&!isFunction(func))throw new TypeError;isPartial&&!partialArgs.length&&(bitmask&=-17,isPartial=partialArgs=!1),isPartialRight&&!partialRightArgs.length&&(bitmask&=-33,isPartialRight=partialRightArgs=!1);var bindData=func&&func.__bindData__;if(bindData&&bindData!==!0)return bindData=slice(bindData),bindData[2]&&(bindData[2]=slice(bindData[2])),bindData[3]&&(bindData[3]=slice(bindData[3])),!isBind||1&bindData[1]||(bindData[4]=thisArg),!isBind&&1&bindData[1]&&(bitmask|=8),!isCurry||4&bindData[1]||(bindData[5]=arity),isPartial&&push.apply(bindData[2]||(bindData[2]=[]),partialArgs),isPartialRight&&unshift.apply(bindData[3]||(bindData[3]=[]),partialRightArgs),bindData[1]|=bitmask,createWrapper.apply(null,bindData);var creater=1==bitmask||17===bitmask?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}function escapeHtmlChar(match){return htmlEscapes[match]}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result}function isNative(value){return"function"==typeof value&&reNative.test(value)}function shimIsPlainObject(value){var ctor,result;return value&&toString.call(value)==objectClass&&(ctor=value.constructor,!isFunction(ctor)||ctor instanceof ctor)?(forIn(value,function(value,key){result=key}),"undefined"==typeof result||hasOwnProperty.call(value,result)):!1}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==argsClass||!1}function clone(value,isDeep,callback,thisArg){return"boolean"!=typeof isDeep&&null!=isDeep&&(thisArg=callback,callback=isDeep,isDeep=!1),baseClone(value,isDeep,"function"==typeof callback&&baseCreateCallback(callback,thisArg,1))}function cloneDeep(value,callback,thisArg){return baseClone(value,!0,"function"==typeof callback&&baseCreateCallback(callback,thisArg,1))}function create(prototype,properties){var result=baseCreate(prototype);return properties?assign(result,properties):result}function findKey(object,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forOwn(object,function(value,key,object){return callback(value,key,object)?(result=key,!1):void 0}),result}function findLastKey(object,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forOwnRight(object,function(value,key,object){return callback(value,key,object)?(result=key,!1):void 0}),result}function forInRight(object,callback,thisArg){var pairs=[];forIn(object,function(value,key){pairs.push(key,value)});var length=pairs.length;for(callback=baseCreateCallback(callback,thisArg,3);length--&&callback(pairs[length--],pairs[length],object)!==!1;);return object}function forOwnRight(object,callback,thisArg){var props=keys(object),length=props.length;for(callback=baseCreateCallback(callback,thisArg,3);length--;){var key=props[length];if(callback(object[key],key,object)===!1)break}return object}function functions(object){var result=[];return forIn(object,function(value,key){isFunction(value)&&result.push(key)}),result.sort()}function has(object,key){return object?hasOwnProperty.call(object,key):!1}function invert(object){for(var index=-1,props=keys(object),length=props.length,result={};++index<length;){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===!0||value===!1||value&&"object"==typeof value&&toString.call(value)==boolClass||!1}function isDate(value){return value&&"object"==typeof value&&toString.call(value)==dateClass||!1}function isElement(value){return value&&1===value.nodeType||!1}function isEmpty(value){var result=!0;if(!value)return result;var className=toString.call(value),length=value.length;return className==arrayClass||className==stringClass||className==argsClass||className==objectClass&&"number"==typeof length&&isFunction(value.splice)?!length:(forOwn(value,function(){return result=!1}),result)}function isEqual(a,b,callback,thisArg){return baseIsEqual(a,b,"function"==typeof callback&&baseCreateCallback(callback,thisArg,2))}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return"function"==typeof value}function isObject(value){return!(!value||!objectTypes[typeof value])}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return null===value}function isNumber(value){return"number"==typeof value||value&&"object"==typeof value&&toString.call(value)==numberClass||!1}function isRegExp(value){return value&&"object"==typeof value&&toString.call(value)==regexpClass||!1}function isString(value){return"string"==typeof value||value&&"object"==typeof value&&toString.call(value)==stringClass||!1}function isUndefined(value){return"undefined"==typeof value
}function mapValues(object,callback,thisArg){var result={};return callback=lodash.createCallback(callback,thisArg,3),forOwn(object,function(value,key,object){result[key]=callback(value,key,object)}),result}function merge(object){var args=arguments,length=2;if(!isObject(object))return object;if("number"!=typeof args[2]&&(length=args.length),length>3&&"function"==typeof args[length-2])var callback=baseCreateCallback(args[--length-1],args[length--],2);else length>2&&"function"==typeof args[length-1]&&(callback=args[--length]);for(var sources=slice(arguments,1,length),index=-1,stackA=getArray(),stackB=getArray();++index<length;)baseMerge(object,sources[index],callback,stackA,stackB);return releaseArray(stackA),releaseArray(stackB),object}function omit(object,callback,thisArg){var result={};if("function"!=typeof callback){var props=[];forIn(object,function(value,key){props.push(key)}),props=baseDifference(props,baseFlatten(arguments,!0,!1,1));for(var index=-1,length=props.length;++index<length;){var key=props[index];result[key]=object[key]}}else callback=lodash.createCallback(callback,thisArg,3),forIn(object,function(value,key,object){callback(value,key,object)||(result[key]=value)});return result}function pairs(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object,callback,thisArg){var result={};if("function"!=typeof callback)for(var index=-1,props=baseFlatten(arguments,!0,!1,1),length=isObject(object)?props.length:0;++index<length;){var key=props[index];key in object&&(result[key]=object[key])}else callback=lodash.createCallback(callback,thisArg,3),forIn(object,function(value,key,object){callback(value,key,object)&&(result[key]=value)});return result}function transform(object,callback,accumulator,thisArg){var isArr=isArray(object);if(null==accumulator)if(isArr)accumulator=[];else{var ctor=object&&object.constructor,proto=ctor&&ctor.prototype;accumulator=baseCreate(proto)}return callback&&(callback=lodash.createCallback(callback,thisArg,4),(isArr?forEach:forOwn)(object,function(value,index,object){return callback(accumulator,value,index,object)})),accumulator}function values(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;)result[index]=object[props[index]];return result}function at(collection){for(var args=arguments,index=-1,props=baseFlatten(args,!0,!1,1),length=args[2]&&args[2][args[1]]===collection?1:props.length,result=Array(length);++index<length;)result[index]=collection[props[index]];return result}function contains(collection,target,fromIndex){var index=-1,indexOf=getIndexOf(),length=collection?collection.length:0,result=!1;return fromIndex=(0>fromIndex?nativeMax(0,length+fromIndex):fromIndex)||0,isArray(collection)?result=indexOf(collection,target,fromIndex)>-1:"number"==typeof length?result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1:forOwn(collection,function(value){return++index>=fromIndex?!(result=value===target):void 0}),result}function every(collection,callback,thisArg){var result=!0;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&(result=!!callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return result=!!callback(value,index,collection)});return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];callback(value,index,collection)&&result.push(value)}else forOwn(collection,function(value,index,collection){callback(value,index,collection)&&result.push(value)});return result}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"!=typeof length){var result;return forOwn(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,!1):void 0}),result}for(;++index<length;){var value=collection[index];if(callback(value,index,collection))return value}}function findLast(collection,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forEachRight(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,!1):void 0}),result}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;++index<length&&callback(collection[index],index,collection)!==!1;);else forOwn(collection,callback);return collection}function forEachRight(collection,callback,thisArg){var length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;length--&&callback(collection[length],length,collection)!==!1;);else{var props=keys(collection);length=props.length,forOwn(collection,function(value,key,collection){return key=props?props[--length]:--length,callback(collection[key],key,collection)})}return collection}function invoke(collection,methodName){var args=slice(arguments,2),index=-1,isFunc="function"==typeof methodName,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)}),result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=lodash.createCallback(callback,thisArg,3),"number"==typeof length)for(var result=Array(length);++index<length;)result[index]=callback(collection[index],index,collection);else result=[],forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)});return result}function max(collection,callback,thisArg){var computed=-1/0,result=computed;if("function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null),null==callback&&isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];value>result&&(result=value)}else callback=null==callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);current>computed&&(computed=current,result=value)});return result}function min(collection,callback,thisArg){var computed=1/0,result=computed;if("function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null),null==callback&&isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];result>value&&(result=value)}else callback=null==callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);computed>current&&(computed=current,result=value)});return result}function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if("number"==typeof length)for(noaccum&&(accumulator=collection[++index]);++index<length;)accumulator=callback(accumulator,collection[index],index,collection);else forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)});return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var noaccum=arguments.length<3;return callback=lodash.createCallback(callback,thisArg,4),forEachRight(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)}),accumulator}function reject(collection,callback,thisArg){return callback=lodash.createCallback(callback,thisArg,3),filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function sample(collection,n,guard){if(collection&&"number"!=typeof collection.length&&(collection=values(collection)),null==n||guard)return collection?collection[baseRandom(0,collection.length-1)]:undefined;var result=shuffle(collection);return result.length=nativeMin(nativeMax(0,n),result.length),result}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){var rand=baseRandom(0,++index);result[index]=result[rand],result[rand]=value}),result}function size(collection){var length=collection?collection.length:0;return"number"==typeof length?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&!(result=callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))});return!!result}function sortBy(collection,callback,thisArg){var index=-1,isArr=isArray(callback),length=collection?collection.length:0,result=Array("number"==typeof length?length:0);for(isArr||(callback=lodash.createCallback(callback,thisArg,3)),forEach(collection,function(value,key,collection){var object=result[++index]=getObject();isArr?object.criteria=map(callback,function(key){return value[key]}):(object.criteria=getArray())[0]=callback(value,key,collection),object.index=index,object.value=value}),length=result.length,result.sort(compareAscending);length--;){var object=result[length];result[length]=object.value,isArr||releaseArray(object.criteria),releaseObject(object)}return result}function toArray(collection){return collection&&"number"==typeof collection.length?slice(collection):values(collection)}function compact(array){for(var index=-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];value&&result.push(value)}return result}function difference(array){return baseDifference(array,baseFlatten(arguments,!0,!0,1))}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);++index<length;)if(callback(array[index],index,array))return index;return-1}function findLastIndex(array,callback,thisArg){var length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);length--;)if(callback(array[length],length,array))return length;return-1}function first(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=-1;for(callback=lodash.createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[0]:undefined;return slice(array,0,nativeMin(nativeMax(0,n),length))}function flatten(array,isShallow,callback,thisArg){return"boolean"!=typeof isShallow&&null!=isShallow&&(thisArg=callback,callback="function"!=typeof isShallow&&thisArg&&thisArg[isShallow]===array?null:isShallow,isShallow=!1),null!=callback&&(array=map(array,callback,thisArg)),baseFlatten(array,isShallow)}function indexOf(array,value,fromIndex){if("number"==typeof fromIndex){var length=array?array.length:0;fromIndex=0>fromIndex?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return baseIndexOf(array,value,fromIndex)}function initial(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=lodash.createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:callback||n;return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(){for(var args=[],argsIndex=-1,argsLength=arguments.length,caches=getArray(),indexOf=getIndexOf(),trustIndexOf=indexOf===baseIndexOf,seen=getArray();++argsIndex<argsLength;){var value=arguments[argsIndex];(isArray(value)||isArguments(value))&&(args.push(value),caches.push(trustIndexOf&&value.length>=largeArraySize&&createCache(argsIndex?args[argsIndex]:seen)))}var array=args[0],index=-1,length=array?array.length:0,result=[];outer:for(;++index<length;){var cache=caches[0];if(value=array[index],(cache?cacheIndexOf(cache,value):indexOf(seen,value))<0){for(argsIndex=argsLength,(cache||seen).push(value);--argsIndex;)if(cache=caches[argsIndex],(cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value))<0)continue outer;result.push(value)}}for(;argsLength--;)cache=caches[argsLength],cache&&releaseObject(cache);return releaseArray(caches),releaseArray(seen),result}function last(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=lodash.createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[length-1]:undefined;return slice(array,nativeMax(0,length-n))}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;for("number"==typeof fromIndex&&(index=(0>fromIndex?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1);index--;)if(array[index]===value)return index;return-1}function pull(array){for(var args=arguments,argsIndex=0,argsLength=args.length,length=array?array.length:0;++argsIndex<argsLength;)for(var index=-1,value=args[argsIndex];++index<length;)array[index]===value&&(splice.call(array,index--,1),length--);return array}function range(start,end,step){start=+start||0,step="number"==typeof step?step:+step||1,null==end&&(end=start,start=0);for(var index=-1,length=nativeMax(0,ceil((end-start)/(step||1))),result=Array(length);++index<length;)result[index]=start,start+=step;return result}function remove(array,callback,thisArg){var index=-1,length=array?array.length:0,result=[];for(callback=lodash.createCallback(callback,thisArg,3);++index<length;){var value=array[index];callback(value,index,array)&&(result.push(value),splice.call(array,index--,1),length--)}return result}function rest(array,callback,thisArg){if("number"!=typeof callback&&null!=callback){var n=0,index=-1,length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:nativeMax(0,callback);return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;for(callback=callback?lodash.createCallback(callback,thisArg,1):identity,value=callback(value);high>low;){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(){return baseUniq(baseFlatten(arguments,!0,!0))}function uniq(array,isSorted,callback,thisArg){return"boolean"!=typeof isSorted&&null!=isSorted&&(thisArg=callback,callback="function"!=typeof isSorted&&thisArg&&thisArg[isSorted]===array?null:isSorted,isSorted=!1),null!=callback&&(callback=lodash.createCallback(callback,thisArg,3)),baseUniq(array,isSorted,callback)}function without(array){return baseDifference(array,slice(arguments,1))}function xor(){for(var index=-1,length=arguments.length;++index<length;){var array=arguments[index];if(isArray(array)||isArguments(array))var result=result?baseUniq(baseDifference(result,array).concat(baseDifference(array,result))):array}return result||[]}function zip(){for(var array=arguments.length>1?arguments:arguments[0],index=-1,length=array?max(pluck(array,"length")):0,result=Array(0>length?0:length);++index<length;)result[index]=pluck(array,index);return result}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};for(values||!length||isArray(keys[0])||(values=[]);++index<length;){var key=keys[index];values?result[key]=values[index]:key&&(result[key[0]]=key[1])}return result}function after(n,func){if(!isFunction(func))throw new TypeError;return function(){return--n<1?func.apply(this,arguments):void 0}}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}function bindAll(object){for(var funcs=arguments.length>1?baseFlatten(arguments,!0,!1,1):functions(object),index=-1,length=funcs.length;++index<length;){var key=funcs[index];object[key]=createWrapper(object[key],1,null,null,object)}return object}function bindKey(object,key){return arguments.length>2?createWrapper(key,19,slice(arguments,2),null,object):createWrapper(key,3,null,null,object)}function compose(){for(var funcs=arguments,length=funcs.length;length--;)if(!isFunction(funcs[length]))throw new TypeError;return function(){for(var args=arguments,length=funcs.length;length--;)args=[funcs[length].apply(this,args)];return args[0]}}function curry(func,arity){return arity="number"==typeof arity?arity:+arity||func.length,createWrapper(func,4,null,null,null,arity)}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=!1,trailing=!0;if(!isFunction(func))throw new TypeError;if(wait=nativeMax(0,wait)||0,options===!0){var leading=!0;trailing=!1}else isObject(options)&&(leading=options.leading,maxWait="maxWait"in options&&(nativeMax(wait,options.maxWait)||0),trailing="trailing"in options?options.trailing:trailing);var delayed=function(){var remaining=wait-(now()-stamp);if(0>=remaining){maxTimeoutId&&clearTimeout(maxTimeoutId);var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined,isCalled&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))}else timeoutId=setTimeout(delayed,remaining)},maxDelayed=function(){timeoutId&&clearTimeout(timeoutId),maxTimeoutId=timeoutId=trailingCall=undefined,(trailing||maxWait!==wait)&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))};return function(){if(args=arguments,stamp=now(),thisArg=this,trailingCall=trailing&&(timeoutId||!leading),maxWait===!1)var leadingCall=leading&&!timeoutId;else{maxTimeoutId||leading||(lastCalled=stamp);var remaining=maxWait-(stamp-lastCalled),isCalled=0>=remaining;isCalled?(maxTimeoutId&&(maxTimeoutId=clearTimeout(maxTimeoutId)),lastCalled=stamp,result=func.apply(thisArg,args)):maxTimeoutId||(maxTimeoutId=setTimeout(maxDelayed,remaining))}return isCalled&&timeoutId?timeoutId=clearTimeout(timeoutId):timeoutId||wait===maxWait||(timeoutId=setTimeout(delayed,wait)),leadingCall&&(isCalled=!0,result=func.apply(thisArg,args)),!isCalled||timeoutId||maxTimeoutId||(args=thisArg=null),result}}function defer(func){if(!isFunction(func))throw new TypeError;var args=slice(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}function delay(func,wait){if(!isFunction(func))throw new TypeError;var args=slice(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){if(!isFunction(func))throw new TypeError;var memoized=function(){var cache=memoized.cache,key=resolver?resolver.apply(this,arguments):keyPrefix+arguments[0];return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)};return memoized.cache={},memoized}function once(func){var ran,result;if(!isFunction(func))throw new TypeError;return function(){return ran?result:(ran=!0,result=func.apply(this,arguments),func=null,result)}}function partial(func){return createWrapper(func,16,slice(arguments,1))}function partialRight(func){return createWrapper(func,32,null,slice(arguments,1))}function throttle(func,wait,options){var leading=!0,trailing=!0;if(!isFunction(func))throw new TypeError;return options===!1?leading=!1:isObject(options)&&(leading="leading"in options?options.leading:leading,trailing="trailing"in options?options.trailing:trailing),debounceOptions.leading=leading,debounceOptions.maxWait=wait,debounceOptions.trailing=trailing,debounce(func,wait,debounceOptions)}function wrap(value,wrapper){return createWrapper(wrapper,16,[value])}function constant(value){return function(){return value}}function createCallback(func,thisArg,argCount){var type=typeof func;if(null==func||"function"==type)return baseCreateCallback(func,thisArg,argCount);if("object"!=type)return property(func);var props=keys(func),key=props[0],a=func[key];return 1!=props.length||a!==a||isObject(a)?function(object){for(var length=props.length,result=!1;length--&&(result=baseIsEqual(object[props[length]],func[props[length]],null,!0)););return result}:function(object){var b=object[key];return a===b&&(0!==a||1/a==1/b)}}function escape(string){return null==string?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object,source,options){var chain=!0,methodNames=source&&functions(source);source&&(options||methodNames.length)||(null==options&&(options=source),ctor=lodashWrapper,source=object,object=lodash,methodNames=functions(source)),options===!1?chain=!1:isObject(options)&&"chain"in options&&(chain=options.chain);var ctor=object,isFunc=isFunction(ctor);forEach(methodNames,function(methodName){var func=object[methodName]=source[methodName];isFunc&&(ctor.prototype[methodName]=function(){var chainAll=this.__chain__,value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(object,args);if(chain||chainAll){if(value===result&&isObject(result))return this;result=new ctor(result),result.__chain__=chainAll}return result})})}function noConflict(){return context._=oldDash,this}function noop(){}function property(key){return function(object){return object[key]}}function random(min,max,floating){var noMin=null==min,noMax=null==max;if(null==floating&&("boolean"==typeof min&&noMax?(floating=min,min=1):noMax||"boolean"!=typeof max||(floating=max,noMax=!0)),noMin&&noMax&&(max=1),min=+min||0,noMax?(max=min,min=0):max=+max||0,floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}function result(object,key){if(object){var value=object[key];return isFunction(value)?object[key]():value}}function template(text,data,options){var settings=lodash.templateSettings;text=String(text||""),options=defaults({},options,settings);var isEvaluating,imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable,hasVariable=variable;hasVariable||(variable="obj",source="with ("+variable+") {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+variable+") {\n"+(hasVariable?"":variable+" || ("+variable+" = {});\n")+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var sourceURL="\n/*\n//# sourceURL="+(options.sourceURL||"/lodash/template/source["+templateCounter++ +"]")+"\n*/";try{var result=Function(importsKeys,"return "+source+sourceURL).apply(undefined,importsValues)}catch(e){throw e.source=source,e}return data?result(data):(result.source=source,result)}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);for(callback=baseCreateCallback(callback,thisArg,1);++index<n;)result[index]=callback(index);return result}function unescape(string){return null==string?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter;return String(null==prefix?"":prefix)+id}function chain(value){return value=new lodashWrapper(value),value.__chain__=!0,value}function tap(value,interceptor){return interceptor(value),value}function wrapperChain(){return this.__chain__=!0,this}function wrapperToString(){return String(this.__wrapped__)}function wrapperValueOf(){return this.__wrapped__}context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayRef=[],objectProto=Object.prototype,oldDash=context._,toString=objectProto.toString,reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,fnToString=Function.prototype.toString,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,setTimeout=context.setTimeout,splice=arrayRef.splice,unshift=arrayRef.unshift,defineProperty=function(){try{var o={},func=isNative(func=Object.defineProperty)&&func,result=func(o,o,o)&&func}catch(e){}return result}(),nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random,ctorByClass={};ctorByClass[arrayClass]=Array,ctorByClass[boolClass]=Boolean,ctorByClass[dateClass]=Date,ctorByClass[funcClass]=Function,ctorByClass[objectClass]=Object,ctorByClass[numberClass]=Number,ctorByClass[regexpClass]=RegExp,ctorByClass[stringClass]=String,lodashWrapper.prototype=lodash.prototype;var support=lodash.support={};support.funcDecomp=!isNative(context.WinRTError)&&reThis.test(runInContext),support.funcNames="string"==typeof Function.name,lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:lodash}},nativeCreate||(baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}());var setBindData=defineProperty?function(func,value){descriptor.value=value,defineProperty(func,"__bindData__",descriptor)}:noop,isArray=nativeIsArray||function(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==arrayClass||!1},shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable)hasOwnProperty.call(iterable,index)&&result.push(index);return result},keys=nativeKeys?function(object){return isObject(object)?nativeKeys(object):[]}:shimKeys,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},htmlUnescapes=invert(htmlEscapes),reEscapedHtml=RegExp("("+keys(htmlUnescapes).join("|")+")","g"),reUnescapedHtml=RegExp("["+keys(htmlEscapes).join("")+"]","g"),assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength="number"==typeof guard?2:args.length;if(argsLength>3&&"function"==typeof args[argsLength-2])var callback=baseCreateCallback(args[--argsLength-1],args[argsLength--],2);else argsLength>2&&"function"==typeof args[argsLength-1]&&(callback=args[--argsLength]);for(;++argsIndex<argsLength;)if(iterable=args[argsIndex],iterable&&objectTypes[typeof iterable])for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)index=ownProps[ownIndex],result[index]=callback?callback(result[index],iterable[index]):iterable[index];return result},defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;for(var args=arguments,argsIndex=0,argsLength="number"==typeof guard?2:args.length;++argsIndex<argsLength;)if(iterable=args[argsIndex],iterable&&objectTypes[typeof iterable])for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)index=ownProps[ownIndex],"undefined"==typeof result[index]&&(result[index]=iterable[index]);return result},forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3);for(index in iterable)if(callback(iterable[index],index,collection)===!1)return result;return result},forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3);for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)if(index=ownProps[ownIndex],callback(iterable[index],index,collection)===!1)return result;return result},isPlainObject=getPrototypeOf?function(value){if(!value||toString.call(value)!=objectClass)return!1;var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)}:shimIsPlainObject,countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key]++:result[key]=1}),groupBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)}),indexBy=createAggregator(function(result,value,key){result[key]=value}),pluck=map,where=filter,now=isNative(now=Date.now)&&now||function(){return(new Date).getTime()},parseInt=8==nativeParseInt(whitespace+"08")?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,""):value,radix||0)};return lodash.after=after,lodash.assign=assign,lodash.at=at,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.chain=chain,lodash.compact=compact,lodash.compose=compose,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.createCallback=createCallback,lodash.curry=curry,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.filter=filter,lodash.flatten=flatten,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.functions=functions,lodash.groupBy=groupBy,lodash.indexBy=indexBy,lodash.initial=initial,lodash.intersection=intersection,lodash.invert=invert,lodash.invoke=invoke,lodash.keys=keys,lodash.map=map,lodash.mapValues=mapValues,lodash.max=max,lodash.memoize=memoize,lodash.merge=merge,lodash.min=min,lodash.omit=omit,lodash.once=once,lodash.pairs=pairs,lodash.partial=partial,lodash.partialRight=partialRight,lodash.pick=pick,lodash.pluck=pluck,lodash.property=property,lodash.pull=pull,lodash.range=range,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.shuffle=shuffle,lodash.sortBy=sortBy,lodash.tap=tap,lodash.throttle=throttle,lodash.times=times,lodash.toArray=toArray,lodash.transform=transform,lodash.union=union,lodash.uniq=uniq,lodash.values=values,lodash.where=where,lodash.without=without,lodash.wrap=wrap,lodash.xor=xor,lodash.zip=zip,lodash.zipObject=zipObject,lodash.collect=map,lodash.drop=rest,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.extend=assign,lodash.methods=functions,lodash.object=zipObject,lodash.select=filter,lodash.tail=rest,lodash.unique=uniq,lodash.unzip=zip,mixin(lodash),lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.contains=contains,lodash.escape=escape,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.has=has,lodash.identity=identity,lodash.indexOf=indexOf,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isNaN=isNaN,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isUndefined=isUndefined,lodash.lastIndexOf=lastIndexOf,lodash.mixin=mixin,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.result=result,lodash.runInContext=runInContext,lodash.size=size,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.template=template,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.all=every,lodash.any=some,lodash.detect=find,lodash.findWhere=find,lodash.foldl=reduce,lodash.foldr=reduceRight,lodash.include=contains,lodash.inject=reduce,mixin(function(){var source={};
return forOwn(lodash,function(func,methodName){lodash.prototype[methodName]||(source[methodName]=func)}),source}(),!1),lodash.first=first,lodash.last=last,lodash.sample=sample,lodash.take=first,lodash.head=first,forOwn(lodash,function(func,methodName){var callbackable="sample"!==methodName;lodash.prototype[methodName]||(lodash.prototype[methodName]=function(n,guard){var chainAll=this.__chain__,result=func(this.__wrapped__,n,guard);return chainAll||null!=n&&(!guard||callbackable&&"function"==typeof n)?new lodashWrapper(result,chainAll):result})}),lodash.VERSION="2.4.1",lodash.prototype.chain=wrapperChain,lodash.prototype.toString=wrapperToString,lodash.prototype.value=wrapperValueOf,lodash.prototype.valueOf=wrapperValueOf,forEach(["join","pop","shift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var chainAll=this.__chain__,result=func.apply(this.__wrapped__,arguments);return chainAll?new lodashWrapper(result,chainAll):result}}),forEach(["push","reverse","sort","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return func.apply(this.__wrapped__,arguments),this}}),forEach(["concat","slice","splice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments),this.__chain__)}}),lodash}var undefined,arrayPool=[],objectPool=[],idCounter=0,keyPrefix=+new Date+"",largeArraySize=75,maxPoolSize=40,whitespace=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reFuncName=/^\s*function[ \n\r\t]+\w/,reInterpolate=/<%=([\s\S]+?)%>/g,reLeadingSpacesAndZeros=RegExp("^["+whitespace+"]*0+(?=.$)"),reNoMatch=/($^)/,reThis=/\bthis\b/,reUnescapedString=/['\n\r\t\u2028\u2029\\]/g,contextProps=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],templateCounter=0,argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]",cloneableClasses={};cloneableClasses[funcClass]=!1,cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=!0;var debounceOptions={leading:!1,maxWait:0,trailing:!1},descriptor={configurable:!1,enumerable:!1,value:null,writable:!1},objectTypes={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},root=objectTypes[typeof window]&&window||this,freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,freeGlobal=objectTypes[typeof global]&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal);var _=runInContext();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _})):freeExports&&freeModule?moduleExports?(freeModule.exports=_)._=_:freeExports._=_:root._=_}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(require,module){"use strict";!function(){function loadDependencies(require,exports,module){sinon=module.exports=require("./sinon/util/core"),require("./sinon/extend"),require("./sinon/typeOf"),require("./sinon/times_in_words"),require("./sinon/spy"),require("./sinon/call"),require("./sinon/behavior"),require("./sinon/stub"),require("./sinon/mock"),require("./sinon/collection"),require("./sinon/assert"),require("./sinon/sandbox"),require("./sinon/test"),require("./sinon/test_case"),require("./sinon/match"),require("./sinon/format"),require("./sinon/log_error")}var sinon,isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;return isAMD?define(loadDependencies):isNode?(loadDependencies(require,module.exports,module),sinon=module.exports):sinon={},sinon}()},{"./sinon/assert":28,"./sinon/behavior":29,"./sinon/call":30,"./sinon/collection":31,"./sinon/extend":32,"./sinon/format":33,"./sinon/log_error":34,"./sinon/match":35,"./sinon/mock":36,"./sinon/sandbox":37,"./sinon/spy":38,"./sinon/stub":39,"./sinon/test":40,"./sinon/test_case":41,"./sinon/times_in_words":42,"./sinon/typeOf":43,"./sinon/util/core":44}],28:[function(require,module){(function(global){"use strict";!function(sinon,global){function makeApi(sinon){function verifyIsStub(){for(var method,i=0,l=arguments.length;l>i;++i)method=arguments[i],method||assert.fail("fake is not a spy"),"function"!=typeof method&&assert.fail(method+" is not a function"),"function"!=typeof method.getCall&&assert.fail(method+" is not stubbed")}function failAssertion(object,msg){object=object||global;var failMethod=object.fail||assert.fail;failMethod.call(object,msg)}function mirrorPropAsAssertion(name,method,message){2==arguments.length&&(message=method,method=name),assert[name]=function(fake){verifyIsStub(fake);var args=slice.call(arguments,1),failed=!1;failed="function"==typeof method?!method(fake):"function"==typeof fake[method]?!fake[method].apply(fake,args):!fake[method],failed?failAssertion(this,fake.printf.apply(fake,[message].concat(args))):assert.pass(name)}}function exposedName(prefix,prop){return!prefix||/^fail/.test(prop)?prop:prefix+prop.slice(0,1).toUpperCase()+prop.slice(1)}var assert;return assert={failException:"AssertError",fail:function(message){var error=new Error(message);throw error.name=this.failException||assert.failException,error},pass:function(){},callOrder:function(){verifyIsStub.apply(null,arguments);var expected="",actual="";if(sinon.calledInOrder(arguments))assert.pass("callOrder");else{try{expected=[].join.call(arguments,", ");for(var calls=slice.call(arguments),i=calls.length;i;)calls[--i].called||calls.splice(i,1);actual=sinon.orderByFirstCall(calls).join(", ")}catch(e){}failAssertion(this,"expected "+expected+" to be called in order but were called as "+actual)}},callCount:function(method,count){if(verifyIsStub(method),method.callCount!=count){var msg="expected %n to be called "+sinon.timesInWords(count)+" but was called %c%C";failAssertion(this,method.printf(msg))}else assert.pass("callCount")},expose:function(target,options){if(!target)throw new TypeError("target is null or undefined");var o=options||{},prefix="undefined"==typeof o.prefix&&"assert"||o.prefix,includeFail="undefined"==typeof o.includeFail||!!o.includeFail;for(var method in this)"expose"==method||!includeFail&&/^(fail)/.test(method)||(target[exposedName(prefix,method)]=this[method]);return target},match:function(actual,expectation){var matcher=sinon.match(expectation);if(matcher.test(actual))assert.pass("match");else{var formatted=["expected value to match","    expected = "+sinon.format(expectation),"    actual = "+sinon.format(actual)];failAssertion(this,formatted.join("\n"))}}},mirrorPropAsAssertion("called","expected %n to have been called at least once but was never called"),mirrorPropAsAssertion("notCalled",function(spy){return!spy.called},"expected %n to not have been called but was called %c%C"),mirrorPropAsAssertion("calledOnce","expected %n to be called once but was called %c%C"),mirrorPropAsAssertion("calledTwice","expected %n to be called twice but was called %c%C"),mirrorPropAsAssertion("calledThrice","expected %n to be called thrice but was called %c%C"),mirrorPropAsAssertion("calledOn","expected %n to be called with %1 as this but was called with %t"),mirrorPropAsAssertion("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),mirrorPropAsAssertion("calledWithNew","expected %n to be called with new"),mirrorPropAsAssertion("alwaysCalledWithNew","expected %n to always be called with new"),mirrorPropAsAssertion("calledWith","expected %n to be called with arguments %*%C"),mirrorPropAsAssertion("calledWithMatch","expected %n to be called with match %*%C"),mirrorPropAsAssertion("alwaysCalledWith","expected %n to always be called with arguments %*%C"),mirrorPropAsAssertion("alwaysCalledWithMatch","expected %n to always be called with match %*%C"),mirrorPropAsAssertion("calledWithExactly","expected %n to be called with exact arguments %*%C"),mirrorPropAsAssertion("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),mirrorPropAsAssertion("neverCalledWith","expected %n to never be called with arguments %*%C"),mirrorPropAsAssertion("neverCalledWithMatch","expected %n to never be called with match %*%C"),mirrorPropAsAssertion("threw","%n did not throw exception%C"),mirrorPropAsAssertion("alwaysThrew","%n did not always throw exception%C"),sinon.assert=assert,assert}function loadDependencies(require,exports,module){var sinon=require("./util/core");require("./match"),module.exports=makeApi(sinon)}var slice=Array.prototype.slice,isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null,"undefined"!=typeof window?window:"undefined"!=typeof self?self:global)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./match":35,"./util/core":44}],29:[function(require,module){(function(process){"use strict";!function(sinon){function throwsException(error,message){return"string"==typeof error?(this.exception=new Error(message||""),this.exception.name=error):this.exception=error?error:new Error("Error"),this}function getCallback(behavior,args){var callArgAt=behavior.callArgAt;if(0>callArgAt){for(var callArgProp=behavior.callArgProp,i=0,l=args.length;l>i;++i){if(!callArgProp&&"function"==typeof args[i])return args[i];if(callArgProp&&args[i]&&"function"==typeof args[i][callArgProp])return args[i][callArgProp]}return null}return args[callArgAt]}function makeApi(sinon){function getCallbackError(behavior,func,args){if(behavior.callArgAt<0){var msg;return msg=behavior.callArgProp?sinon.functionName(behavior.stub)+" expected to yield to '"+behavior.callArgProp+"', but no object with such a property was passed.":sinon.functionName(behavior.stub)+" expected to yield, but no callback was passed.",args.length>0&&(msg+=" Received ["+join.call(args,", ")+"]"),msg}return"argument at index "+behavior.callArgAt+" is not a function: "+func}function callCallback(behavior,args){if("number"==typeof behavior.callArgAt){var func=getCallback(behavior,args);if("function"!=typeof func)throw new TypeError(getCallbackError(behavior,func,args));behavior.callbackAsync?nextTick(function(){func.apply(behavior.callbackContext,behavior.callbackArguments)}):func.apply(behavior.callbackContext,behavior.callbackArguments)}}var proto={create:function(stub){var behavior=sinon.extend({},sinon.behavior);return delete behavior.create,behavior.stub=stub,behavior},isPresent:function(){return"number"==typeof this.callArgAt||this.exception||"number"==typeof this.returnArgAt||this.returnThis||this.returnValueDefined},invoke:function(context,args){if(callCallback(this,args),this.exception)throw this.exception;return"number"==typeof this.returnArgAt?args[this.returnArgAt]:this.returnThis?context:this.returnValue},onCall:function(index){return this.stub.onCall(index)},onFirstCall:function(){return this.stub.onFirstCall()},onSecondCall:function(){return this.stub.onSecondCall()},onThirdCall:function(){return this.stub.onThirdCall()},withArgs:function(){throw new Error('Defining a stub by invoking "stub.onCall(...).withArgs(...)" is not supported. Use "stub.withArgs(...).onCall(...)" to define sequential behavior for calls with certain arguments.')},callsArg:function(pos){if("number"!=typeof pos)throw new TypeError("argument index is not number");return this.callArgAt=pos,this.callbackArguments=[],this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOn:function(pos,context){if("number"!=typeof pos)throw new TypeError("argument index is not number");if("object"!=typeof context)throw new TypeError("argument context is not an object");return this.callArgAt=pos,this.callbackArguments=[],this.callbackContext=context,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgWith:function(pos){if("number"!=typeof pos)throw new TypeError("argument index is not number");return this.callArgAt=pos,this.callbackArguments=slice.call(arguments,1),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOnWith:function(pos,context){if("number"!=typeof pos)throw new TypeError("argument index is not number");if("object"!=typeof context)throw new TypeError("argument context is not an object");return this.callArgAt=pos,this.callbackArguments=slice.call(arguments,2),this.callbackContext=context,this.callArgProp=void 0,this.callbackAsync=!1,this},yields:function(){return this.callArgAt=-1,this.callbackArguments=slice.call(arguments,0),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsOn:function(context){if("object"!=typeof context)throw new TypeError("argument context is not an object");return this.callArgAt=-1,this.callbackArguments=slice.call(arguments,1),this.callbackContext=context,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsTo:function(prop){return this.callArgAt=-1,this.callbackArguments=slice.call(arguments,1),this.callbackContext=void 0,this.callArgProp=prop,this.callbackAsync=!1,this},yieldsToOn:function(prop,context){if("object"!=typeof context)throw new TypeError("argument context is not an object");return this.callArgAt=-1,this.callbackArguments=slice.call(arguments,2),this.callbackContext=context,this.callArgProp=prop,this.callbackAsync=!1,this},"throws":throwsException,throwsException:throwsException,returns:function(value){return this.returnValue=value,this.returnValueDefined=!0,this},returnsArg:function(pos){if("number"!=typeof pos)throw new TypeError("argument index is not number");return this.returnArgAt=pos,this},returnsThis:function(){return this.returnThis=!0,this}};for(var method in proto)proto.hasOwnProperty(method)&&method.match(/^(callsArg|yields)/)&&!method.match(/Async/)&&(proto[method+"Async"]=function(syncFnName){return function(){var result=this[syncFnName].apply(this,arguments);return this.callbackAsync=!0,result}}(method));return sinon.behavior=proto,proto}function loadDependencies(require,exports,module){var sinon=require("./util/core");module.exports=makeApi(sinon)}var slice=Array.prototype.slice,join=Array.prototype.join,nextTick=function(){return"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:"function"==typeof setImmediate?setImmediate:function(callback){setTimeout(callback,0)}}(),isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)}).call(this,require("_process"))},{"./util/core":44,_process:17}],30:[function(require,module){"use strict";!function(sinon){function makeApi(sinon){function throwYieldError(proxy,text,args){var msg=sinon.functionName(proxy)+text;throw args.length&&(msg+=" Received ["+slice.call(args).join(", ")+"]"),new Error(msg)}function createSpyCall(spy,thisValue,args,returnValue,exception,id){if("number"!=typeof id)throw new TypeError("Call id is not a number");var proxyCall=sinon.create(callProto);return proxyCall.proxy=spy,proxyCall.thisValue=thisValue,proxyCall.args=args,proxyCall.returnValue=returnValue,proxyCall.exception=exception,proxyCall.callId=id,proxyCall}var slice=Array.prototype.slice,callProto={calledOn:function(thisValue){return sinon.match&&sinon.match.isMatcher(thisValue)?thisValue.test(this.thisValue):this.thisValue===thisValue},calledWith:function(){for(var i=0,l=arguments.length;l>i;i+=1)if(!sinon.deepEqual(arguments[i],this.args[i]))return!1;return!0},calledWithMatch:function(){for(var i=0,l=arguments.length;l>i;i+=1){var actual=this.args[i],expectation=arguments[i];if(!sinon.match||!sinon.match(expectation).test(actual))return!1}return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){return!this.calledWith.apply(this,arguments)},notCalledWithMatch:function(){return!this.calledWithMatch.apply(this,arguments)},returned:function(value){return sinon.deepEqual(value,this.returnValue)},threw:function(error){return"undefined"!=typeof error&&this.exception?this.exception===error||this.exception.name===error:!!this.exception},calledWithNew:function(){return this.proxy.prototype&&this.thisValue instanceof this.proxy},calledBefore:function(other){return this.callId<other.callId},calledAfter:function(other){return this.callId>other.callId},callArg:function(pos){this.args[pos]()},callArgOn:function(pos,thisValue){this.args[pos].apply(thisValue)},callArgWith:function(pos){this.callArgOnWith.apply(this,[pos,null].concat(slice.call(arguments,1)))},callArgOnWith:function(pos,thisValue){var args=slice.call(arguments,2);this.args[pos].apply(thisValue,args)},"yield":function(){this.yieldOn.apply(this,[null].concat(slice.call(arguments,0)))},yieldOn:function(thisValue){for(var args=this.args,i=0,l=args.length;l>i;++i)if("function"==typeof args[i])return void args[i].apply(thisValue,slice.call(arguments,1));throwYieldError(this.proxy," cannot yield since no callback was passed.",args)},yieldTo:function(prop){this.yieldToOn.apply(this,[prop,null].concat(slice.call(arguments,1)))},yieldToOn:function(prop,thisValue){for(var args=this.args,i=0,l=args.length;l>i;++i)if(args[i]&&"function"==typeof args[i][prop])return void args[i][prop].apply(thisValue,slice.call(arguments,2));throwYieldError(this.proxy," cannot yield to '"+prop+"' since no callback was passed.",args)},toString:function(){for(var callStr=this.proxy.toString()+"(",args=[],i=0,l=this.args.length;l>i;++i)args.push(sinon.format(this.args[i]));return callStr=callStr+args.join(", ")+")","undefined"!=typeof this.returnValue&&(callStr+=" => "+sinon.format(this.returnValue)),this.exception&&(callStr+=" !"+this.exception.name,this.exception.message&&(callStr+="("+this.exception.message+")")),callStr}};return callProto.invokeCallback=callProto["yield"],createSpyCall.toString=callProto.toString,sinon.spyCall=createSpyCall,createSpyCall}function loadDependencies(require,exports,module){var sinon=require("./util/core");require("./match"),module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./match":35,"./util/core":44}],31:[function(require,module){"use strict";!function(sinon){function getFakes(fakeCollection){return fakeCollection.fakes||(fakeCollection.fakes=[]),fakeCollection.fakes}function each(fakeCollection,method){for(var fakes=getFakes(fakeCollection),i=0,l=fakes.length;l>i;i+=1)"function"==typeof fakes[i][method]&&fakes[i][method]()}function compact(fakeCollection){for(var fakes=getFakes(fakeCollection),i=0;i<fakes.length;)fakes.splice(i,1)}function makeApi(sinon){var collection={verify:function(){each(this,"verify")},restore:function(){each(this,"restore"),compact(this)},reset:function(){each(this,"reset")},verifyAndRestore:function(){var exception;try{this.verify()}catch(e){exception=e}if(this.restore(),exception)throw exception},add:function(fake){return push.call(getFakes(this),fake),fake},spy:function(){return this.add(sinon.spy.apply(sinon,arguments))},stub:function(object,property,value){if(property){var original=object[property];if("function"!=typeof original){if(!hasOwnProperty.call(object,property))throw new TypeError("Cannot stub non-existent own property "+property);return object[property]=value,this.add({restore:function(){object[property]=original}})}}if(!property&&object&&"object"==typeof object){var stubbedObj=sinon.stub.apply(sinon,arguments);for(var prop in stubbedObj)"function"==typeof stubbedObj[prop]&&this.add(stubbedObj[prop]);return stubbedObj}return this.add(sinon.stub.apply(sinon,arguments))},mock:function(){return this.add(sinon.mock.apply(sinon,arguments))},inject:function(obj){var col=this;return obj.spy=function(){return col.spy.apply(col,arguments)},obj.stub=function(){return col.stub.apply(col,arguments)},obj.mock=function(){return col.mock.apply(col,arguments)},obj}};return sinon.collection=collection,collection}function loadDependencies(require,exports,module){var sinon=require("./util/core");require("./mock"),require("./spy"),require("./stub"),module.exports=makeApi(sinon)}var push=[].push,hasOwnProperty=Object.prototype.hasOwnProperty,isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./mock":36,"./spy":38,"./stub":39,"./util/core":44}],32:[function(require,module){"use strict";!function(sinon){function makeApi(sinon){function extend(target){var source,i,prop,sources=Array.prototype.slice.call(arguments,1);for(i=0;i<sources.length;i++){source=sources[i];for(prop in source)source.hasOwnProperty(prop)&&(target[prop]=source[prop]);hasDontEnumBug&&source.hasOwnProperty("toString")&&source.toString!==target.toString&&(target.toString=source.toString)}return target}var hasDontEnumBug=function(){var obj={constructor:function(){return"0"},toString:function(){return"1"},valueOf:function(){return"2"},toLocaleString:function(){return"3"},prototype:function(){return"4"},isPrototypeOf:function(){return"5"},propertyIsEnumerable:function(){return"6"},hasOwnProperty:function(){return"7"},length:function(){return"8"},unique:function(){return"9"}},result=[];for(var prop in obj)result.push(obj[prop]());return"0123456789"!==result.join("")}();return sinon.extend=extend,sinon.extend}function loadDependencies(require,exports,module){var sinon=require("./util/core");module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./util/core":44}],33:[function(require,module){"use strict";!function(sinon,formatio){function makeApi(sinon){function valueFormatter(value){return""+value}function getFormatioFormatter(){function format(){return formatter.ascii.apply(formatter,arguments)}var formatter=formatio.configure({quoteStrings:!1,limitChildrenCount:250});return format}function getNodeFormatter(){function format(value){return"object"==typeof value&&value.toString===Object.prototype.toString?util.inspect(value):value}try{var util=require("util")}catch(e){}return util?format:valueFormatter}var formatter,isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require;if(isNode)try{formatio=require("formatio")}catch(e){}return formatter=formatio?getFormatioFormatter():isNode?getNodeFormatter():valueFormatter,sinon.format=formatter,sinon.format}function loadDependencies(require,exports,module){var sinon=require("./util/core");module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null,"object"==typeof formatio&&formatio)},{"./util/core":44,formatio:49,util:19}],34:[function(require,module){"use strict";!function(sinon){function makeApi(sinon){function log(){}function logError(label,err){var msg=label+" threw exception: ";sinon.log(msg+"["+err.name+"] "+err.message),err.stack&&sinon.log(err.stack),logError.setTimeout(function(){throw err.message=msg+err.message,err},0)}logError.setTimeout=function(func,timeout){realSetTimeout(func,timeout)};var exports={};return exports.log=sinon.log=log,exports.logError=sinon.logError=logError,exports}function loadDependencies(require,exports,module){var sinon=require("./util/core");module.exports=makeApi(sinon)}var realSetTimeout=setTimeout,isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./util/core":44}],35:[function(require,module){"use strict";!function(sinon){function makeApi(sinon){function assertType(value,type,name){var actual=sinon.typeOf(value);if(actual!==type)throw new TypeError("Expected type of "+name+" to be "+type+", but was "+actual)}function isMatcher(object){return matcher.isPrototypeOf(object)}function matchObject(expectation,actual){if(null===actual||void 0===actual)return!1;for(var key in expectation)if(expectation.hasOwnProperty(key)){var exp=expectation[key],act=actual[key];if(match.isMatcher(exp)){if(!exp.test(act))return!1}else if("object"===sinon.typeOf(exp)){if(!matchObject(exp,act))return!1}else if(!sinon.deepEqual(exp,act))return!1}return!0}function createPropertyMatcher(propertyTest,messagePrefix){return function(property,value){assertType(property,"string","property");var onlyProperty=1===arguments.length,message=messagePrefix+'("'+property+'"';return onlyProperty||(message+=", "+value),message+=")",match(function(actual){return void 0!==actual&&null!==actual&&propertyTest(actual,property)?onlyProperty||sinon.deepEqual(value,actual[property]):!1},message)}}var matcher={toString:function(){return this.message}};matcher.or=function(m2){if(!arguments.length)throw new TypeError("Matcher expected");isMatcher(m2)||(m2=match(m2));var m1=this,or=sinon.create(matcher);return or.test=function(actual){return m1.test(actual)||m2.test(actual)},or.message=m1.message+".or("+m2.message+")",or},matcher.and=function(m2){if(!arguments.length)throw new TypeError("Matcher expected");isMatcher(m2)||(m2=match(m2));var m1=this,and=sinon.create(matcher);return and.test=function(actual){return m1.test(actual)&&m2.test(actual)},and.message=m1.message+".and("+m2.message+")",and};var match=function(expectation,message){var m=sinon.create(matcher),type=sinon.typeOf(expectation);switch(type){case"object":if("function"==typeof expectation.test)return m.test=function(actual){return expectation.test(actual)===!0},m.message="match("+sinon.functionName(expectation.test)+")",m;var str=[];for(var key in expectation)expectation.hasOwnProperty(key)&&str.push(key+": "+expectation[key]);m.test=function(actual){return matchObject(expectation,actual)},m.message="match("+str.join(", ")+")";break;case"number":m.test=function(actual){return expectation==actual};break;case"string":m.test=function(actual){return"string"!=typeof actual?!1:-1!==actual.indexOf(expectation)},m.message='match("'+expectation+'")';break;case"regexp":m.test=function(actual){return"string"!=typeof actual?!1:expectation.test(actual)};break;case"function":m.test=expectation,m.message=message?message:"match("+sinon.functionName(expectation)+")";break;default:m.test=function(actual){return sinon.deepEqual(expectation,actual)}}return m.message||(m.message="match("+expectation+")"),m};return match.isMatcher=isMatcher,match.any=match(function(){return!0},"any"),match.defined=match(function(actual){return null!==actual&&void 0!==actual},"defined"),match.truthy=match(function(actual){return!!actual},"truthy"),match.falsy=match(function(actual){return!actual},"falsy"),match.same=function(expectation){return match(function(actual){return expectation===actual},"same("+expectation+")")},match.typeOf=function(type){return assertType(type,"string","type"),match(function(actual){return sinon.typeOf(actual)===type},'typeOf("'+type+'")')},match.instanceOf=function(type){return assertType(type,"function","type"),match(function(actual){return actual instanceof type},"instanceOf("+sinon.functionName(type)+")")},match.has=createPropertyMatcher(function(actual,property){return"object"==typeof actual?property in actual:void 0!==actual[property]},"has"),match.hasOwn=createPropertyMatcher(function(actual,property){return actual.hasOwnProperty(property)},"hasOwn"),match.bool=match.typeOf("boolean"),match.number=match.typeOf("number"),match.string=match.typeOf("string"),match.object=match.typeOf("object"),match.func=match.typeOf("function"),match.array=match.typeOf("array"),match.regexp=match.typeOf("regexp"),match.date=match.typeOf("date"),sinon.match=match,match}function loadDependencies(require,exports,module){var sinon=require("./util/core");module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./util/core":44}],36:[function(require,module){"use strict";!function(sinon){function makeApi(sinon){function mock(object){return object?mock.create(object):sinon.expectation.create("Anonymous mock")}function each(collection,callback){if(collection)for(var i=0,l=collection.length;l>i;i+=1)callback(collection[i])}function callCountInWords(callCount){return 0==callCount?"never called":"called "+times(callCount)}function expectedCallCountInWords(expectation){var min=expectation.minCalls,max=expectation.maxCalls;if("number"==typeof min&&"number"==typeof max){var str=times(min);return min!=max&&(str="at least "+str+" and at most "+times(max)),str}return"number"==typeof min?"at least "+times(min):"at most "+times(max)}function receivedMinCalls(expectation){var hasMinLimit="number"==typeof expectation.minCalls;return!hasMinLimit||expectation.callCount>=expectation.minCalls}function receivedMaxCalls(expectation){return"number"!=typeof expectation.maxCalls?!1:expectation.callCount==expectation.maxCalls}function verifyMatcher(possibleMatcher,arg){return match&&match.isMatcher(possibleMatcher)?possibleMatcher.test(arg):!0}var push=[].push,match=sinon.match;sinon.extend(mock,{create:function(object){if(!object)throw new TypeError("object is null");var mockObject=sinon.extend({},mock);return mockObject.object=object,delete mockObject.create,mockObject},expects:function(method){if(!method)throw new TypeError("method is falsy");if(this.expectations||(this.expectations={},this.proxies=[]),!this.expectations[method]){this.expectations[method]=[];var mockObject=this;sinon.wrapMethod(this.object,method,function(){return mockObject.invokeMethod(method,this,arguments)
}),push.call(this.proxies,method)}var expectation=sinon.expectation.create(method);return push.call(this.expectations[method],expectation),expectation},restore:function(){var object=this.object;each(this.proxies,function(proxy){"function"==typeof object[proxy].restore&&object[proxy].restore()})},verify:function(){var expectations=this.expectations||{},messages=[],met=[];return each(this.proxies,function(proxy){each(expectations[proxy],function(expectation){expectation.met()?push.call(met,expectation.toString()):push.call(messages,expectation.toString())})}),this.restore(),messages.length>0?sinon.expectation.fail(messages.concat(met).join("\n")):met.length>0&&sinon.expectation.pass(messages.concat(met).join("\n")),!0},invokeMethod:function(method,thisValue,args){var i,expectations=this.expectations&&this.expectations[method],length=expectations&&expectations.length||0;for(i=0;length>i;i+=1)if(!expectations[i].met()&&expectations[i].allowsCall(thisValue,args))return expectations[i].apply(thisValue,args);var available,messages=[],exhausted=0;for(i=0;length>i;i+=1)expectations[i].allowsCall(thisValue,args)?available=available||expectations[i]:exhausted+=1,push.call(messages,"    "+expectations[i].toString());return 0===exhausted?available.apply(thisValue,args):(messages.unshift("Unexpected call: "+sinon.spyCall.toString.call({proxy:method,args:args})),void sinon.expectation.fail(messages.join("\n")))}});var times=sinon.timesInWords,slice=Array.prototype.slice;return sinon.expectation={minCalls:1,maxCalls:1,create:function(methodName){var expectation=sinon.extend(sinon.stub.create(),sinon.expectation);return delete expectation.create,expectation.method=methodName,expectation},invoke:function(func,thisValue,args){return this.verifyCallAllowed(thisValue,args),sinon.spy.invoke.apply(this,arguments)},atLeast:function(num){if("number"!=typeof num)throw new TypeError("'"+num+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=num,this},atMost:function(num){if("number"!=typeof num)throw new TypeError("'"+num+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=num,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(num){if("number"!=typeof num)throw new TypeError("'"+num+"' is not a number");return this.atLeast(num),this.atMost(num)},met:function(){return!this.failed&&receivedMinCalls(this)},verifyCallAllowed:function(thisValue,args){if(receivedMaxCalls(this)&&(this.failed=!0,sinon.expectation.fail(this.method+" already called "+times(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==thisValue&&sinon.expectation.fail(this.method+" called with "+thisValue+" as thisValue, expected "+this.expectedThis),"expectedArguments"in this){args||sinon.expectation.fail(this.method+" received no arguments, expected "+sinon.format(this.expectedArguments)),args.length<this.expectedArguments.length&&sinon.expectation.fail(this.method+" received too few arguments ("+sinon.format(args)+"), expected "+sinon.format(this.expectedArguments)),this.expectsExactArgCount&&args.length!=this.expectedArguments.length&&sinon.expectation.fail(this.method+" received too many arguments ("+sinon.format(args)+"), expected "+sinon.format(this.expectedArguments));for(var i=0,l=this.expectedArguments.length;l>i;i+=1)verifyMatcher(this.expectedArguments[i],args[i])||sinon.expectation.fail(this.method+" received wrong arguments "+sinon.format(args)+", didn't match "+this.expectedArguments.toString()),sinon.deepEqual(this.expectedArguments[i],args[i])||sinon.expectation.fail(this.method+" received wrong arguments "+sinon.format(args)+", expected "+sinon.format(this.expectedArguments))}},allowsCall:function(thisValue,args){if(this.met()&&receivedMaxCalls(this))return!1;if("expectedThis"in this&&this.expectedThis!==thisValue)return!1;if(!("expectedArguments"in this))return!0;if(args=args||[],args.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&args.length!=this.expectedArguments.length)return!1;for(var i=0,l=this.expectedArguments.length;l>i;i+=1){if(!verifyMatcher(this.expectedArguments[i],args[i]))return!1;if(!sinon.deepEqual(this.expectedArguments[i],args[i]))return!1}return!0},withArgs:function(){return this.expectedArguments=slice.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(thisValue){return this.expectedThis=thisValue,this},toString:function(){var args=(this.expectedArguments||[]).slice();this.expectsExactArgCount||push.call(args,"[...]");var callStr=sinon.spyCall.toString.call({proxy:this.method||"anonymous mock expectation",args:args}),message=callStr.replace(", [...","[, ...")+" "+expectedCallCountInWords(this);return this.met()?"Expectation met: "+message:"Expected "+message+" ("+callCountInWords(this.callCount)+")"},verify:function(){return this.met()?sinon.expectation.pass(this.toString()):sinon.expectation.fail(this.toString()),!0},pass:function(message){sinon.assert.pass(message)},fail:function(message){var exception=new Error(message);throw exception.name="ExpectationError",exception}},sinon.mock=mock,mock}function loadDependencies(require,exports,module){var sinon=require("./util/core");require("./call"),require("./match"),require("./spy"),module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./call":30,"./match":35,"./spy":38,"./util/core":44}],37:[function(require,module){"use strict";!function(){function makeApi(sinon){function exposeValue(sandbox,config,key,value){value&&(!config.injectInto||key in config.injectInto?push.call(sandbox.args,value):(config.injectInto[key]=value,sandbox.injectedKeys.push(key)))}function prepareSandboxFromConfig(config){var sandbox=sinon.create(sinon.sandbox);return config.useFakeServer&&("object"==typeof config.useFakeServer&&(sandbox.serverPrototype=config.useFakeServer),sandbox.useFakeServer()),config.useFakeTimers&&("object"==typeof config.useFakeTimers?sandbox.useFakeTimers.apply(sandbox,config.useFakeTimers):sandbox.useFakeTimers()),sandbox}var push=[].push;return sinon.sandbox=sinon.extend(sinon.create(sinon.collection),{useFakeTimers:function(){return this.clock=sinon.useFakeTimers.apply(sinon,arguments),this.add(this.clock)},serverPrototype:sinon.fakeServer,useFakeServer:function(){var proto=this.serverPrototype||sinon.fakeServer;return proto&&proto.create?(this.server=proto.create(),this.add(this.server)):null},inject:function(obj){return sinon.collection.inject.call(this,obj),this.clock&&(obj.clock=this.clock),this.server&&(obj.server=this.server,obj.requests=this.server.requests),obj.match=sinon.match,obj},restore:function(){sinon.collection.restore.apply(this,arguments),this.restoreContext()},restoreContext:function(){if(this.injectedKeys){for(var i=0,j=this.injectedKeys.length;j>i;i++)delete this.injectInto[this.injectedKeys[i]];this.injectedKeys=[]}},create:function(config){if(!config)return sinon.create(sinon.sandbox);var sandbox=prepareSandboxFromConfig(config);sandbox.args=sandbox.args||[],sandbox.injectedKeys=[],sandbox.injectInto=config.injectInto;var prop,value,exposed=sandbox.inject({});if(config.properties)for(var i=0,l=config.properties.length;l>i;i++)prop=config.properties[i],value=exposed[prop]||"sandbox"==prop&&sandbox,exposeValue(sandbox,config,prop,value);else exposeValue(sandbox,config,"sandbox",value);return sandbox},match:sinon.match}),sinon.sandbox.useFakeXMLHttpRequest=sinon.sandbox.useFakeServer,sinon.sandbox}function loadDependencies(require,exports,module){var sinon=require("./util/core");require("./util/fake_server"),require("./util/fake_timers"),require("./collection"),module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}()},{"./collection":31,"./util/core":44,"./util/fake_server":46,"./util/fake_timers":47}],38:[function(require,module,exports){"use strict";!function(sinon){function makeApi(sinon){function spy(object,property){if(!property&&"function"==typeof object)return spy.create(object);if(!object&&!property)return spy.create(function(){});var method=object[property];return sinon.wrapMethod(object,property,spy.create(method))}function matchingFake(fakes,args,strict){if(fakes)for(var i=0,l=fakes.length;l>i;i++)if(fakes[i].matches(args,strict))return fakes[i]}function incrementCallCount(){this.called=!0,this.callCount+=1,this.notCalled=!1,this.calledOnce=1==this.callCount,this.calledTwice=2==this.callCount,this.calledThrice=3==this.callCount}function createCallProperties(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1)}function createProxy(func){var p;return func.length?eval("p = (function proxy("+vars.substring(0,2*func.length-1)+") { return p.invoke(func, this, slice.call(arguments)); });"):p=function(){return p.invoke(func,this,slice.call(arguments))},p}function delegateToCalls(method,matchAny,actual,notCalled){spyApi[method]=function(){if(!this.called)return notCalled?notCalled.apply(this,arguments):!1;for(var currentCall,matches=0,i=0,l=this.callCount;l>i;i+=1)if(currentCall=this.getCall(i),currentCall[actual||method].apply(currentCall,arguments)&&(matches+=1,matchAny))return!0;return matches===this.callCount}}var push=Array.prototype.push,slice=Array.prototype.slice,callId=0,vars="a,b,c,d,e,f,g,h,i,j,k,l",uuid=0,spyApi={reset:function(){if(this.invoking){var err=new Error("Cannot reset Sinon function while invoking it. Move the call to .reset outside of the callback.");throw err.name="InvalidResetException",err}if(this.called=!1,this.notCalled=!0,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[],this.fakes)for(var i=0;i<this.fakes.length;i++)this.fakes[i].reset()},create:function(func){var name;"function"!=typeof func?func=function(){}:name=sinon.functionName(func);var proxy=createProxy(func);return sinon.extend(proxy,spy),delete proxy.create,sinon.extend(proxy,func),proxy.reset(),proxy.prototype=func.prototype,proxy.displayName=name||"spy",proxy.toString=sinon.functionToString,proxy.instantiateFake=sinon.spy.create,proxy.id="spy#"+uuid++,proxy},invoke:function(func,thisValue,args){var exception,returnValue,matching=matchingFake(this.fakes,args);incrementCallCount.call(this),push.call(this.thisValues,thisValue),push.call(this.args,args),push.call(this.callIds,callId++),createCallProperties.call(this);try{this.invoking=!0,returnValue=matching?matching.invoke(func,thisValue,args):(this.func||func).apply(thisValue,args);var thisCall=this.getCall(this.callCount-1);thisCall.calledWithNew()&&"object"!=typeof returnValue&&(returnValue=thisValue)}catch(e){exception=e}finally{delete this.invoking}if(push.call(this.exceptions,exception),push.call(this.returnValues,returnValue),createCallProperties.call(this),void 0!==exception)throw exception;return returnValue},named:function(name){return this.displayName=name,this},getCall:function(i){return 0>i||i>=this.callCount?null:sinon.spyCall(this,this.thisValues[i],this.args[i],this.returnValues[i],this.exceptions[i],this.callIds[i])},getCalls:function(){var i,calls=[];for(i=0;i<this.callCount;i++)calls.push(this.getCall(i));return calls},calledBefore:function(spyFn){return this.called?spyFn.called?this.callIds[0]<spyFn.callIds[spyFn.callIds.length-1]:!0:!1},calledAfter:function(spyFn){return this.called&&spyFn.called?this.callIds[this.callCount-1]>spyFn.callIds[spyFn.callCount-1]:!1},withArgs:function(){var args=slice.call(arguments);if(this.fakes){var match=matchingFake(this.fakes,args,!0);if(match)return match}else this.fakes=[];var original=this,fake=this.instantiateFake();fake.matchingAguments=args,fake.parent=this,push.call(this.fakes,fake),fake.withArgs=function(){return original.withArgs.apply(original,arguments)};for(var i=0;i<this.args.length;i++)fake.matches(this.args[i])&&(incrementCallCount.call(fake),push.call(fake.thisValues,this.thisValues[i]),push.call(fake.args,this.args[i]),push.call(fake.returnValues,this.returnValues[i]),push.call(fake.exceptions,this.exceptions[i]),push.call(fake.callIds,this.callIds[i]));return createCallProperties.call(fake),fake},matches:function(args,strict){var margs=this.matchingAguments;return margs.length<=args.length&&sinon.deepEqual(margs,args.slice(0,margs.length))?!strict||margs.length==args.length:void 0},printf:function(format){var formatter,spy=this,args=slice.call(arguments,1);return(format||"").replace(/%(.)/g,function(match,specifyer){return formatter=spyApi.formatters[specifyer],"function"==typeof formatter?formatter.call(null,spy,args):isNaN(parseInt(specifyer,10))?"%"+specifyer:sinon.format(args[specifyer-1])})}};return delegateToCalls("calledOn",!0),delegateToCalls("alwaysCalledOn",!1,"calledOn"),delegateToCalls("calledWith",!0),delegateToCalls("calledWithMatch",!0),delegateToCalls("alwaysCalledWith",!1,"calledWith"),delegateToCalls("alwaysCalledWithMatch",!1,"calledWithMatch"),delegateToCalls("calledWithExactly",!0),delegateToCalls("alwaysCalledWithExactly",!1,"calledWithExactly"),delegateToCalls("neverCalledWith",!1,"notCalledWith",function(){return!0}),delegateToCalls("neverCalledWithMatch",!1,"notCalledWithMatch",function(){return!0}),delegateToCalls("threw",!0),delegateToCalls("alwaysThrew",!1,"threw"),delegateToCalls("returned",!0),delegateToCalls("alwaysReturned",!1,"returned"),delegateToCalls("calledWithNew",!0),delegateToCalls("alwaysCalledWithNew",!1,"calledWithNew"),delegateToCalls("callArg",!1,"callArgWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgWith=spyApi.callArg,delegateToCalls("callArgOn",!1,"callArgOnWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgOnWith=spyApi.callArgOn,delegateToCalls("yield",!1,"yield",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),spyApi.invokeCallback=spyApi["yield"],delegateToCalls("yieldOn",!1,"yieldOn",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),delegateToCalls("yieldTo",!1,"yieldTo",function(property){throw new Error(this.toString()+" cannot yield to '"+property+"' since it was not yet invoked.")}),delegateToCalls("yieldToOn",!1,"yieldToOn",function(property){throw new Error(this.toString()+" cannot yield to '"+property+"' since it was not yet invoked.")}),spyApi.formatters={c:function(spy){return sinon.timesInWords(spy.callCount)},n:function(spy){return spy.toString()},C:function(spy){for(var calls=[],i=0,l=spy.callCount;l>i;++i){var stringifiedCall="    "+spy.getCall(i).toString();/\n/.test(calls[i-1])&&(stringifiedCall="\n"+stringifiedCall),push.call(calls,stringifiedCall)}return calls.length>0?"\n"+calls.join("\n"):""},t:function(spy){for(var objects=[],i=0,l=spy.callCount;l>i;++i)push.call(objects,sinon.format(spy.thisValues[i]));return objects.join(", ")},"*":function(spy,args){for(var formatted=[],i=0,l=args.length;l>i;++i)push.call(formatted,sinon.format(args[i]));return formatted.join(", ")}},sinon.extend(spy,spyApi),spy.spyCall=sinon.spyCall,sinon.spy=spy,spy}function loadDependencies(require,exports,module){var sinon=require("./util/core");require("./call"),module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./call":30,"./util/core":44}],39:[function(require,module){"use strict";!function(sinon){function makeApi(sinon){function stub(object,property,func){if(func&&"function"!=typeof func)throw new TypeError("Custom stub should be function");var wrapper;if(wrapper=func?sinon.spy&&sinon.spy.create?sinon.spy.create(func):func:stub.create(),!object&&"undefined"==typeof property)return sinon.stub.create();if("undefined"==typeof property&&"object"==typeof object){for(var prop in object)"function"==typeof object[prop]&&stub(object,prop);return object}return sinon.wrapMethod(object,property,wrapper)}function getDefaultBehavior(stub){return stub.defaultBehavior||getParentBehaviour(stub)||sinon.behavior.create(stub)}function getParentBehaviour(stub){return stub.parent&&getCurrentBehavior(stub.parent)}function getCurrentBehavior(stub){var behavior=stub.behaviors[stub.callCount-1];return behavior&&behavior.isPresent()?behavior:getDefaultBehavior(stub)}var uuid=0,proto={create:function(){var functionStub=function(){return getCurrentBehavior(functionStub).invoke(this,arguments)};functionStub.id="stub#"+uuid++;var orig=functionStub;return functionStub=sinon.spy.create(functionStub),functionStub.func=orig,sinon.extend(functionStub,stub),functionStub.instantiateFake=sinon.stub.create,functionStub.displayName="stub",functionStub.toString=sinon.functionToString,functionStub.defaultBehavior=null,functionStub.behaviors=[],functionStub},resetBehavior:function(){var i;if(this.defaultBehavior=null,this.behaviors=[],delete this.returnValue,delete this.returnArgAt,this.returnThis=!1,this.fakes)for(i=0;i<this.fakes.length;i++)this.fakes[i].resetBehavior()},onCall:function(index){return this.behaviors[index]||(this.behaviors[index]=sinon.behavior.create(this)),this.behaviors[index]},onFirstCall:function(){return this.onCall(0)},onSecondCall:function(){return this.onCall(1)},onThirdCall:function(){return this.onCall(2)}};for(var method in sinon.behavior)sinon.behavior.hasOwnProperty(method)&&!proto.hasOwnProperty(method)&&"create"!=method&&"withArgs"!=method&&"invoke"!=method&&(proto[method]=function(behaviorMethod){return function(){return this.defaultBehavior=this.defaultBehavior||sinon.behavior.create(this),this.defaultBehavior[behaviorMethod].apply(this.defaultBehavior,arguments),this}}(method));return sinon.extend(stub,proto),sinon.stub=stub,stub}function loadDependencies(require,exports,module){var sinon=require("./util/core");require("./behavior"),require("./spy"),module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./behavior":29,"./spy":38,"./util/core":44}],40:[function(require,module){"use strict";!function(sinon){function makeApi(sinon){function test(callback){function sinonSandboxedTest(){var config=sinon.getConfig(sinon.config);config.injectInto=config.injectIntoThis&&this||config.injectInto;var exception,result,sandbox=sinon.sandbox.create(config),doneIsWrapped=!1,argumentsCopy=Array.prototype.slice.call(arguments);if(argumentsCopy.length>0&&"function"==typeof argumentsCopy[arguments.length-1]){var oldDone=argumentsCopy[arguments.length-1];argumentsCopy[arguments.length-1]=function(result){if(result)throw sandbox.restore(),exception;sandbox.verifyAndRestore(),oldDone(result)},doneIsWrapped=!0}var args=argumentsCopy.concat(sandbox.args);try{result=callback.apply(this,args)}catch(e){exception=e}if(!doneIsWrapped){if("undefined"!=typeof exception)throw sandbox.restore(),exception;sandbox.verifyAndRestore()}return result}var type=typeof callback;if("function"!=type)throw new TypeError("sinon.test needs to wrap a test function, got "+type);return callback.length?function(){return sinonSandboxedTest.apply(this,arguments)}:sinonSandboxedTest}return test.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},sinon.test=test,test}function loadDependencies(require,exports,module){var sinon=require("./util/core");require("./sandbox"),module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./sandbox":37,"./util/core":44}],41:[function(require,module){"use strict";!function(sinon){function createTest(property,setUp,tearDown){return function(){setUp&&setUp.apply(this,arguments);var exception,result;try{result=property.apply(this,arguments)}catch(e){exception=e}if(tearDown&&tearDown.apply(this,arguments),exception)throw exception;return result}}function makeApi(sinon){function testCase(tests,prefix){if(!tests||"object"!=typeof tests)throw new TypeError("sinon.testCase needs an object with test functions");prefix=prefix||"test";var testName,property,method,rPrefix=new RegExp("^"+prefix),methods={},setUp=tests.setUp,tearDown=tests.tearDown;for(testName in tests)if(tests.hasOwnProperty(testName)){if(property=tests[testName],/^(setUp|tearDown)$/.test(testName))continue;"function"==typeof property&&rPrefix.test(testName)?(method=property,(setUp||tearDown)&&(method=createTest(property,setUp,tearDown)),methods[testName]=sinon.test(method)):methods[testName]=tests[testName]}return methods}return sinon.testCase=testCase,testCase}function loadDependencies(require,exports,module){var sinon=require("./util/core");require("./test"),module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./test":40,"./util/core":44}],42:[function(require,module){"use strict";!function(sinon){function makeApi(sinon){function timesInWords(count){switch(count){case 1:return"once";case 2:return"twice";case 3:return"thrice";default:return(count||0)+" times"}}return sinon.timesInWords=timesInWords,sinon.timesInWords}function loadDependencies(require,exports,module){var sinon=require("./util/core");module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./util/core":44}],43:[function(require,module){"use strict";!function(sinon){function makeApi(sinon){function typeOf(value){if(null===value)return"null";if(void 0===value)return"undefined";var string=Object.prototype.toString.call(value);return string.substring(8,string.length-1).toLowerCase()}return sinon.typeOf=typeOf,sinon.typeOf}function loadDependencies(require,exports,module){var sinon=require("./util/core");module.exports=makeApi(sinon)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null,"object"==typeof formatio&&formatio)},{"./util/core":44}],44:[function(require,module){"use strict";!function(sinon){function isDOMNode(obj){var success=!1;try{obj.appendChild(div),success=div.parentNode==obj}catch(e){return!1}finally{try{obj.removeChild(div)}catch(e){}}return success}function isElement(obj){return div&&obj&&1===obj.nodeType&&isDOMNode(obj)}function isFunction(obj){return"function"==typeof obj||!!(obj&&obj.constructor&&obj.call&&obj.apply)}function isReallyNaN(val){return"number"==typeof val&&isNaN(val)}function mirrorProperties(target,source){for(var prop in source)hasOwn.call(target,prop)||(target[prop]=source[prop])}function isRestorable(obj){return"function"==typeof obj&&"function"==typeof obj.restore&&obj.restore.sinon}function makeApi(sinon){return sinon.wrapMethod=function(object,property,method){if(!object)throw new TypeError("Should wrap property of object");if("function"!=typeof method)throw new TypeError("Method wrapper should be function");var error,wrappedMethod=object[property];if(isFunction(wrappedMethod)){if(wrappedMethod.restore&&wrappedMethod.restore.sinon)error=new TypeError("Attempted to wrap "+property+" which is already wrapped");else if(wrappedMethod.calledBefore){var verb=wrappedMethod.returns?"stubbed":"spied on";error=new TypeError("Attempted to wrap "+property+" which is already "+verb)}}else error=new TypeError("Attempted to wrap "+typeof wrappedMethod+" property "+property+" as function");if(error)throw wrappedMethod&&wrappedMethod.stackTrace&&(error.stack+="\n--------------\n"+wrappedMethod.stackTrace),error;var owned=object.hasOwnProperty?object.hasOwnProperty(property):hasOwn.call(object,property);return object[property]=method,method.displayName=property,method.stackTrace=new Error("Stack Trace for original").stack,method.restore=function(){owned||delete object[property],object[property]===method&&(object[property]=wrappedMethod)},method.restore.sinon=!0,mirrorProperties(method,wrappedMethod),method},sinon.create=function(proto){var F=function(){};return F.prototype=proto,new F},sinon.deepEqual=function deepEqual(a,b){if(sinon.match&&sinon.match.isMatcher(a))return a.test(b);if("object"!=typeof a||"object"!=typeof b)return isReallyNaN(a)&&isReallyNaN(b)?!0:a===b;if(isElement(a)||isElement(b))return a===b;if(a===b)return!0;if(null===a&&null!==b||null!==a&&null===b)return!1;if(a instanceof RegExp&&b instanceof RegExp)return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;var aString=Object.prototype.toString.call(a);if(aString!=Object.prototype.toString.call(b))return!1;if("[object Date]"==aString)return a.valueOf()===b.valueOf();var prop,aLength=0,bLength=0;if("[object Array]"==aString&&a.length!==b.length)return!1;for(prop in a){if(aLength+=1,!(prop in b))return!1;if(!deepEqual(a[prop],b[prop]))return!1}for(prop in b)bLength+=1;return aLength==bLength},sinon.functionName=function(func){var name=func.displayName||func.name;if(!name){var matches=func.toString().match(/function ([^\s\(]+)/);name=matches&&matches[1]}return name},sinon.functionToString=function(){if(this.getCall&&this.callCount)for(var thisValue,prop,i=this.callCount;i--;){thisValue=this.getCall(i).thisValue;for(prop in thisValue)if(thisValue[prop]===this)return prop}return this.displayName||"sinon fake"},sinon.getConfig=function(custom){var config={};custom=custom||{};var defaults=sinon.defaultConfig;for(var prop in defaults)defaults.hasOwnProperty(prop)&&(config[prop]=custom.hasOwnProperty(prop)?custom[prop]:defaults[prop]);return config},sinon.defaultConfig={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},sinon.timesInWords=function(count){return 1==count&&"once"||2==count&&"twice"||3==count&&"thrice"||(count||0)+" times"},sinon.calledInOrder=function(spies){for(var i=1,l=spies.length;l>i;i++)if(!spies[i-1].calledBefore(spies[i])||!spies[i].called)return!1;return!0},sinon.orderByFirstCall=function(spies){return spies.sort(function(a,b){var aCall=a.getCall(0),bCall=b.getCall(0),aId=aCall&&aCall.callId||-1,bId=bCall&&bCall.callId||-1;return bId>aId?-1:1})},sinon.createStubInstance=function(constructor){if("function"!=typeof constructor)throw new TypeError("The constructor should be a function.");return sinon.stub(sinon.create(constructor.prototype))},sinon.restore=function(object){if(null!==object&&"object"==typeof object)for(var prop in object)isRestorable(object[prop])&&object[prop].restore();else isRestorable(object)&&object.restore()},sinon}function loadDependencies(require,exports){makeApi(exports)}var div="undefined"!=typeof document&&document.createElement("div"),hasOwn=Object.prototype.hasOwnProperty,isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{}],45:[function(require,module){"use strict";"undefined"==typeof sinon&&(this.sinon={}),function(){function makeApi(sinon){sinon.Event=function(type,bubbles,cancelable,target){this.initEvent(type,bubbles,cancelable,target)},sinon.Event.prototype={initEvent:function(type,bubbles,cancelable,target){this.type=type,this.bubbles=bubbles,this.cancelable=cancelable,this.target=target},stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}},sinon.ProgressEvent=function(type,progressEventRaw,target){this.initEvent(type,!1,!1,target),this.loaded=progressEventRaw.loaded||null,this.total=progressEventRaw.total||null},sinon.ProgressEvent.prototype=new sinon.Event,sinon.ProgressEvent.prototype.constructor=sinon.ProgressEvent,sinon.CustomEvent=function(type,customData,target){this.initEvent(type,!1,!1,target),this.detail=customData.detail||null},sinon.CustomEvent.prototype=new sinon.Event,sinon.CustomEvent.prototype.constructor=sinon.CustomEvent,sinon.EventTarget={addEventListener:function(event,listener){this.eventListeners=this.eventListeners||{},this.eventListeners[event]=this.eventListeners[event]||[],push.call(this.eventListeners[event],listener)},removeEventListener:function(event,listener){for(var listeners=this.eventListeners&&this.eventListeners[event]||[],i=0,l=listeners.length;l>i;++i)if(listeners[i]==listener)return listeners.splice(i,1)},dispatchEvent:function(event){for(var type=event.type,listeners=this.eventListeners&&this.eventListeners[type]||[],i=0;i<listeners.length;i++)"function"==typeof listeners[i]?listeners[i].call(this,event):listeners[i].handleEvent(event);return!!event.defaultPrevented}}}function loadDependencies(require){var sinon=require("./core");makeApi(sinon)}var push=[].push,isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;isAMD?define(loadDependencies):isNode?loadDependencies(require):makeApi(sinon)}()},{"./core":44}],46:[function(require,module){"use strict";if("undefined"==typeof sinon)var sinon={};!function(){function F(){}function create(proto){return F.prototype=proto,new F}function responseArray(handler){var response=handler;if("[object Array]"!=Object.prototype.toString.call(handler)&&(response=[200,{},handler]),"string"!=typeof response[2])throw new TypeError("Fake server response body should be string, but was "+typeof response[2]);return response}function matchOne(response,reqMethod,reqUrl){var rmeth=response.method,matchMethod=!rmeth||rmeth.toLowerCase()==reqMethod.toLowerCase(),url=response.url,matchUrl=!url||url==reqUrl||"function"==typeof url.test&&url.test(reqUrl);return matchMethod&&matchUrl}function match(response,request){var requestUrl=request.url;if((!/^https?:\/\//.test(requestUrl)||rCurrLoc.test(requestUrl))&&(requestUrl=requestUrl.replace(rCurrLoc,"")),matchOne(response,this.getHTTPMethod(request),requestUrl)){if("function"==typeof response.response){var ru=response.url,args=[request].concat(ru&&"function"==typeof ru.exec?ru.exec(requestUrl).slice(1):[]);
return response.response.apply(response,args)}return!0}return!1}function makeApi(sinon){sinon.fakeServer={create:function(){var server=create(this);return this.xhr=sinon.useFakeXMLHttpRequest(),server.requests=[],this.xhr.onCreate=function(xhrObj){server.addRequest(xhrObj)},server},addRequest:function(xhrObj){var server=this;push.call(this.requests,xhrObj),xhrObj.onSend=function(){server.handleRequest(this),server.autoRespond&&!server.responding&&(setTimeout(function(){server.responding=!1,server.respond()},server.autoRespondAfter||10),server.responding=!0)}},getHTTPMethod:function(request){if(this.fakeHTTPMethods&&/post/i.test(request.method)){var matches=(request.requestBody||"").match(/_method=([^\b;]+)/);return matches?matches[1]:request.method}return request.method},handleRequest:function(xhr){xhr.async?(this.queue||(this.queue=[]),push.call(this.queue,xhr)):this.processRequest(xhr)},log:function(response,request){var str;str="Request:\n"+sinon.format(request)+"\n\n",str+="Response:\n"+sinon.format(response)+"\n\n",sinon.log(str)},respondWith:function(method,url,body){return 1==arguments.length&&"function"!=typeof method?void(this.response=responseArray(method)):(this.responses||(this.responses=[]),1==arguments.length&&(body=method,url=method=null),2==arguments.length&&(body=url,url=method,method=null),void push.call(this.responses,{method:method,url:url,response:"function"==typeof body?body:responseArray(body)}))},respond:function(){arguments.length>0&&this.respondWith.apply(this,arguments);for(var request,queue=this.queue||[],requests=queue.splice(0,queue.length);request=requests.shift();)this.processRequest(request)},processRequest:function(request){try{if(request.aborted)return;var response=this.response||[404,{},""];if(this.responses)for(var l=this.responses.length,i=l-1;i>=0;i--)if(match.call(this,this.responses[i],request)){response=this.responses[i].response;break}4!=request.readyState&&(this.log(response,request),request.respond(response[0],response[1],response[2]))}catch(e){sinon.logError("Fake server request processing",e)}},restore:function(){return this.xhr.restore&&this.xhr.restore.apply(this.xhr,arguments)}}}function loadDependencies(require,exports,module){var sinon=require("./core");require("./fake_xml_http_request"),makeApi(sinon),module.exports=sinon}var push=[].push,wloc="undefined"!=typeof window?window.location:{},rCurrLoc=new RegExp("^"+wloc.protocol+"//"+wloc.host),isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;isAMD?define(loadDependencies):isNode?loadDependencies(require,module.exports,module):makeApi(sinon)}()},{"./core":44,"./fake_xml_http_request":48}],47:[function(require,module){(function(global){"use strict";if("undefined"==typeof sinon)var sinon={};!function(){function makeApi(sinon,lol){var llx="undefined"!=typeof lolex?lolex:lol;sinon.useFakeTimers=function(){var now,methods=Array.prototype.slice.call(arguments);now="string"==typeof methods[0]?0:methods.shift();var clock=llx.install(now||0,methods);return clock.restore=clock.uninstall,clock},sinon.clock={create:function(now){return llx.createClock(now)}},sinon.timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setImmediate:"undefined"!=typeof setImmediate?setImmediate:void 0,clearImmediate:"undefined"!=typeof clearImmediate?clearImmediate:void 0,setInterval:setInterval,clearInterval:clearInterval,Date:Date}}function loadDependencies(require,epxorts,module){var sinon=require("./core");makeApi(sinon,require("lolex")),module.exports=sinon}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;isAMD?define(loadDependencies):isNode?loadDependencies(require,module.exports,module):makeApi(sinon)}("undefined"!=typeof global&&"function"!=typeof global?global:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":44,lolex:51}],48:[function(require,module){"use strict";!function(global){function FakeXMLHttpRequest(){function addEventListener(eventName){xhr.addEventListener(eventName,function(event){var listener=xhr["on"+eventName];listener&&"function"==typeof listener&&listener.call(this,event)})}this.readyState=FakeXMLHttpRequest.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="",this.upload=new UploadProgress,sinonXhr.supportsCORS&&(this.withCredentials=!1);for(var xhr=this,events=["loadstart","load","abort","loadend"],i=events.length-1;i>=0;i--)addEventListener(events[i]);"function"==typeof FakeXMLHttpRequest.onCreate&&FakeXMLHttpRequest.onCreate(this)}function UploadProgress(){this.eventListeners={progress:[],load:[],abort:[],error:[]}}function verifyState(xhr){if(xhr.readyState!==FakeXMLHttpRequest.OPENED)throw new Error("INVALID_STATE_ERR");if(xhr.sendFlag)throw new Error("INVALID_STATE_ERR")}function getHeader(headers,header){header=header.toLowerCase();for(var h in headers)if(h.toLowerCase()==header)return h;return null}function each(collection,callback){if(collection)for(var i=0,l=collection.length;l>i;i+=1)callback(collection[i])}function some(collection,callback){for(var index=0;index<collection.length;index++)if(callback(collection[index])===!0)return!0;return!1}function verifyRequestOpened(xhr){if(xhr.readyState!=FakeXMLHttpRequest.OPENED)throw new Error("INVALID_STATE_ERR - "+xhr.readyState)}function verifyRequestSent(xhr){if(xhr.readyState==FakeXMLHttpRequest.DONE)throw new Error("Request done")}function verifyHeadersReceived(xhr){if(xhr.async&&xhr.readyState!=FakeXMLHttpRequest.HEADERS_RECEIVED)throw new Error("No headers received")}function verifyResponseBodyType(body){if("string"!=typeof body){var error=new Error("Attempted to respond to fake XMLHttpRequest with "+body+", which is not a string.");throw error.name="InvalidBodyException",error}}function makeApi(sinon){sinon.xhr=sinonXhr,sinon.extend(FakeXMLHttpRequest.prototype,sinon.EventTarget,{async:!0,open:function(method,url,async,username,password){if(this.method=method,this.url=url,this.async="boolean"==typeof async?async:!0,this.username=username,this.password=password,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1,FakeXMLHttpRequest.useFilters===!0){var xhrArgs=arguments,defake=some(FakeXMLHttpRequest.filters,function(filter){return filter.apply(this,xhrArgs)});if(defake)return FakeXMLHttpRequest.defake(this,arguments)}this.readyStateChange(FakeXMLHttpRequest.OPENED)},readyStateChange:function(state){if(this.readyState=state,"function"==typeof this.onreadystatechange)try{this.onreadystatechange()}catch(e){sinon.logError("Fake XHR onreadystatechange handler",e)}switch(this.dispatchEvent(new sinon.Event("readystatechange")),this.readyState){case FakeXMLHttpRequest.DONE:this.dispatchEvent(new sinon.Event("load",!1,!1,this)),this.dispatchEvent(new sinon.Event("loadend",!1,!1,this)),this.upload.dispatchEvent(new sinon.Event("load",!1,!1,this)),supportsProgress&&this.upload.dispatchEvent(new sinon.ProgressEvent("progress",{loaded:100,total:100}))}},setRequestHeader:function(header,value){if(verifyState(this),unsafeHeaders[header]||/^(Sec-|Proxy-)/.test(header))throw new Error('Refused to set unsafe header "'+header+'"');this.requestHeaders[header]?this.requestHeaders[header]+=","+value:this.requestHeaders[header]=value},setResponseHeaders:function(headers){verifyRequestOpened(this),this.responseHeaders={};for(var header in headers)headers.hasOwnProperty(header)&&(this.responseHeaders[header]=headers[header]);this.async?this.readyStateChange(FakeXMLHttpRequest.HEADERS_RECEIVED):this.readyState=FakeXMLHttpRequest.HEADERS_RECEIVED},send:function(data){if(verifyState(this),!/^(get|head)$/i.test(this.method)){var contentType=getHeader(this.requestHeaders,"Content-Type");if(this.requestHeaders[contentType]){var value=this.requestHeaders[contentType].split(";");this.requestHeaders[contentType]=value[0]+";charset=utf-8"}else this.requestHeaders["Content-Type"]="text/plain;charset=utf-8";this.requestBody=data}this.errorFlag=!1,this.sendFlag=this.async,this.readyStateChange(FakeXMLHttpRequest.OPENED),"function"==typeof this.onSend&&this.onSend(this),this.dispatchEvent(new sinon.Event("loadstart",!1,!1,this))},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>FakeXMLHttpRequest.UNSENT&&this.sendFlag&&(this.readyStateChange(FakeXMLHttpRequest.DONE),this.sendFlag=!1),this.readyState=FakeXMLHttpRequest.UNSENT,this.dispatchEvent(new sinon.Event("abort",!1,!1,this)),this.upload.dispatchEvent(new sinon.Event("abort",!1,!1,this)),"function"==typeof this.onerror&&this.onerror()},getResponseHeader:function(header){return this.readyState<FakeXMLHttpRequest.HEADERS_RECEIVED?null:/^Set-Cookie2?$/i.test(header)?null:(header=getHeader(this.responseHeaders,header),this.responseHeaders[header]||null)},getAllResponseHeaders:function(){if(this.readyState<FakeXMLHttpRequest.HEADERS_RECEIVED)return"";var headers="";for(var header in this.responseHeaders)this.responseHeaders.hasOwnProperty(header)&&!/^Set-Cookie2?$/i.test(header)&&(headers+=header+": "+this.responseHeaders[header]+"\r\n");return headers},setResponseBody:function(body){verifyRequestSent(this),verifyHeadersReceived(this),verifyResponseBodyType(body);var chunkSize=this.chunkSize||10,index=0;this.responseText="";do this.async&&this.readyStateChange(FakeXMLHttpRequest.LOADING),this.responseText+=body.substring(index,index+chunkSize),index+=chunkSize;while(index<body.length);var type=this.getResponseHeader("Content-Type");if(this.responseText&&(!type||/(text\/xml)|(application\/xml)|(\+xml)/.test(type)))try{this.responseXML=FakeXMLHttpRequest.parseXML(this.responseText)}catch(e){}this.readyStateChange(FakeXMLHttpRequest.DONE)},respond:function(status,headers,body){this.status="number"==typeof status?status:200,this.statusText=FakeXMLHttpRequest.statusCodes[this.status],this.setResponseHeaders(headers||{}),this.setResponseBody(body||"")},uploadProgress:function(progressEventRaw){supportsProgress&&this.upload.dispatchEvent(new sinon.ProgressEvent("progress",progressEventRaw))},uploadError:function(error){supportsCustomEvent&&this.upload.dispatchEvent(new sinon.CustomEvent("error",{detail:error}))}}),sinon.extend(FakeXMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),sinon.useFakeXMLHttpRequest=function(){return FakeXMLHttpRequest.restore=function(keepOnCreate){sinonXhr.supportsXHR&&(global.XMLHttpRequest=sinonXhr.GlobalXMLHttpRequest),sinonXhr.supportsActiveX&&(global.ActiveXObject=sinonXhr.GlobalActiveXObject),delete FakeXMLHttpRequest.restore,keepOnCreate!==!0&&delete FakeXMLHttpRequest.onCreate},sinonXhr.supportsXHR&&(global.XMLHttpRequest=FakeXMLHttpRequest),sinonXhr.supportsActiveX&&(global.ActiveXObject=function(objId){return"Microsoft.XMLHTTP"==objId||/^Msxml2\.XMLHTTP/i.test(objId)?new FakeXMLHttpRequest:new sinonXhr.GlobalActiveXObject(objId)}),FakeXMLHttpRequest},sinon.FakeXMLHttpRequest=FakeXMLHttpRequest}function loadDependencies(require,exports,module){var sinon=require("./core");require("./event"),makeApi(sinon),module.exports=sinon}var supportsProgress="undefined"!=typeof ProgressEvent,supportsCustomEvent="undefined"!=typeof CustomEvent,sinonXhr={XMLHttpRequest:global.XMLHttpRequest};sinonXhr.GlobalXMLHttpRequest=global.XMLHttpRequest,sinonXhr.GlobalActiveXObject=global.ActiveXObject,sinonXhr.supportsActiveX="undefined"!=typeof sinonXhr.GlobalActiveXObject,sinonXhr.supportsXHR="undefined"!=typeof sinonXhr.GlobalXMLHttpRequest,sinonXhr.workingXHR=sinonXhr.supportsXHR?sinonXhr.GlobalXMLHttpRequest:sinonXhr.supportsActiveX?function(){return new sinonXhr.GlobalActiveXObject("MSXML2.XMLHTTP.3.0")}:!1,sinonXhr.supportsCORS=sinonXhr.supportsXHR&&"withCredentials"in new sinonXhr.GlobalXMLHttpRequest;var unsafeHeaders={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0};UploadProgress.prototype.addEventListener=function(event,listener){this.eventListeners[event].push(listener)},UploadProgress.prototype.removeEventListener=function(event,listener){for(var listeners=this.eventListeners[event]||[],i=0,l=listeners.length;l>i;++i)if(listeners[i]==listener)return listeners.splice(i,1)},UploadProgress.prototype.dispatchEvent=function(event){for(var listener,listeners=this.eventListeners[event.type]||[],i=0;null!=(listener=listeners[i]);i++)listener(event)};var apply=function(obj,method,args){switch(args.length){case 0:return obj[method]();case 1:return obj[method](args[0]);case 2:return obj[method](args[0],args[1]);case 3:return obj[method](args[0],args[1],args[2]);case 4:return obj[method](args[0],args[1],args[2],args[3]);case 5:return obj[method](args[0],args[1],args[2],args[3],args[4])}};FakeXMLHttpRequest.filters=[],FakeXMLHttpRequest.addFilter=function(fn){this.filters.push(fn)};var IE6Re=/MSIE 6/;FakeXMLHttpRequest.defake=function(fakeXhr,xhrArgs){var xhr=new sinonXhr.workingXHR;each(["open","setRequestHeader","send","abort","getResponseHeader","getAllResponseHeaders","addEventListener","overrideMimeType","removeEventListener"],function(method){fakeXhr[method]=function(){return apply(xhr,method,arguments)}});var copyAttrs=function(args){each(args,function(attr){try{fakeXhr[attr]=xhr[attr]}catch(e){if(!IE6Re.test(navigator.userAgent))throw e}})},stateChange=function(){fakeXhr.readyState=xhr.readyState,xhr.readyState>=FakeXMLHttpRequest.HEADERS_RECEIVED&&copyAttrs(["status","statusText"]),xhr.readyState>=FakeXMLHttpRequest.LOADING&&copyAttrs(["responseText","response"]),xhr.readyState===FakeXMLHttpRequest.DONE&&copyAttrs(["responseXML"]),fakeXhr.onreadystatechange&&fakeXhr.onreadystatechange.call(fakeXhr,{target:fakeXhr})};if(xhr.addEventListener){for(var event in fakeXhr.eventListeners)fakeXhr.eventListeners.hasOwnProperty(event)&&each(fakeXhr.eventListeners[event],function(handler){xhr.addEventListener(event,handler)});xhr.addEventListener("readystatechange",stateChange)}else xhr.onreadystatechange=stateChange;apply(xhr,"open",xhrArgs)},FakeXMLHttpRequest.useFilters=!1,FakeXMLHttpRequest.parseXML=function(text){var xmlDoc;if("undefined"!=typeof DOMParser){var parser=new DOMParser;xmlDoc=parser.parseFromString(text,"text/xml")}else xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async="false",xmlDoc.loadXML(text);return xmlDoc},FakeXMLHttpRequest.statusCodes={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if("undefined"==typeof sinon)return;makeApi(sinon)}}("undefined"!=typeof self?self:this)},{"./core":44,"./event":45}],49:[function(require,module){(function(global){("function"==typeof define&&define.amd&&function(m){define("formatio",["samsam"],m)}||"object"==typeof module&&function(m){module.exports=m(require("samsam"))}||function(m){this.formatio=m(this.samsam)})(function(samsam){"use strict";function functionName(func){if(!func)return"";if(func.displayName)return func.displayName;if(func.name)return func.name;var matches=func.toString().match(/function\s+([^\(]+)/m);return matches&&matches[1]||""}function constructorName(f,object){var i,l,name=functionName(object&&object.constructor),excludes=f.excludeConstructors||formatio.excludeConstructors||[];for(i=0,l=excludes.length;l>i;++i){if("string"==typeof excludes[i]&&excludes[i]===name)return"";if(excludes[i].test&&excludes[i].test(name))return""}return name}function isCircular(object,objects){if("object"!=typeof object)return!1;var i,l;for(i=0,l=objects.length;l>i;++i)if(objects[i]===object)return!0;return!1}function ascii(f,object,processed,indent){if("string"==typeof object){var qs=f.quoteStrings,quote="boolean"!=typeof qs||qs;return processed||quote?'"'+object+'"':object}if("function"==typeof object&&!(object instanceof RegExp))return ascii.func(object);if(processed=processed||[],isCircular(object,processed))return"[Circular]";if("[object Array]"===Object.prototype.toString.call(object))return ascii.array.call(f,object,processed);if(!object)return String(1/object===-1/0?"-0":object);if(samsam.isElement(object))return ascii.element(object);if("function"==typeof object.toString&&object.toString!==Object.prototype.toString)return object.toString();var i,l;for(i=0,l=specialObjects.length;l>i;i++)if(object===specialObjects[i].object)return specialObjects[i].value;return ascii.object.call(f,object,processed,indent)}function Formatio(options){for(var opt in options)this[opt]=options[opt]}var formatio={excludeConstructors:["Object",/^.$/],quoteStrings:!0,limitChildrenCount:0},specialObjects=(Object.prototype.hasOwnProperty,[]);return"undefined"!=typeof global&&specialObjects.push({object:global,value:"[object global]"}),"undefined"!=typeof document&&specialObjects.push({object:document,value:"[object HTMLDocument]"}),"undefined"!=typeof window&&specialObjects.push({object:window,value:"[object Window]"}),ascii.func=function(func){return"function "+functionName(func)+"() {}"},ascii.array=function(array,processed){processed=processed||[],processed.push(array);var i,l,pieces=[];for(l=this.limitChildrenCount>0?Math.min(this.limitChildrenCount,array.length):array.length,i=0;l>i;++i)pieces.push(ascii(this,array[i],processed));return l<array.length&&pieces.push("[... "+(array.length-l)+" more elements]"),"["+pieces.join(", ")+"]"},ascii.object=function(object,processed,indent){processed=processed||[],processed.push(object),indent=indent||0;var prop,str,obj,i,k,l,pieces=[],properties=samsam.keys(object).sort(),length=3;for(l=this.limitChildrenCount>0?Math.min(this.limitChildrenCount,properties.length):properties.length,i=0;l>i;++i)prop=properties[i],obj=object[prop],str=isCircular(obj,processed)?"[Circular]":ascii(this,obj,processed,indent+2),str=(/\s/.test(prop)?'"'+prop+'"':prop)+": "+str,length+=str.length,pieces.push(str);var cons=constructorName(this,object),prefix=cons?"["+cons+"] ":"",is="";for(i=0,k=indent;k>i;++i)is+=" ";return l<properties.length&&pieces.push("[... "+(properties.length-l)+" more elements]"),length+indent>80?prefix+"{\n  "+is+pieces.join(",\n  "+is)+"\n"+is+"}":prefix+"{ "+pieces.join(", ")+" }"},ascii.element=function(element){var attr,attrName,i,l,val,tagName=element.tagName.toLowerCase(),attrs=element.attributes,pairs=[];for(i=0,l=attrs.length;l>i;++i)attr=attrs.item(i),attrName=attr.nodeName.toLowerCase().replace("html:",""),val=attr.nodeValue,("contenteditable"!==attrName||"inherit"!==val)&&val&&pairs.push(attrName+'="'+val+'"');var formatted="<"+tagName+(pairs.length>0?" ":""),content=element.innerHTML;content.length>20&&(content=content.substr(0,20)+"[...]");var res=formatted+pairs.join(" ")+">"+content+"</"+tagName+">";return res.replace(/ contentEditable="inherit"/,"")},Formatio.prototype={functionName:functionName,configure:function(options){return new Formatio(options)},constructorName:function(object){return constructorName(this,object)},ascii:function(object,processed,indent){return ascii(this,object,processed,indent)}},Formatio.prototype})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{samsam:50}],50:[function(require,module){("function"==typeof define&&define.amd&&function(m){define("samsam",m)}||"object"==typeof module&&function(m){module.exports=m()}||function(m){this.samsam=m()})(function(){function isNaN(value){var val=value;return"number"==typeof value&&value!==val}function getClass(value){return o.toString.call(value).split(/[ \]]/)[1]}function isArguments(object){if("Arguments"===getClass(object))return!0;if("object"!=typeof object||"number"!=typeof object.length||"Array"===getClass(object))return!1;if("function"==typeof object.callee)return!0;try{object[object.length]=6,delete object[object.length]}catch(e){return!0}return!1}function isElement(object){if(!object||1!==object.nodeType||!div)return!1;try{object.appendChild(div),object.removeChild(div)}catch(e){return!1}return!0}function keys(object){var prop,ks=[];for(prop in object)o.hasOwnProperty.call(object,prop)&&ks.push(prop);return ks}function isDate(value){return"function"==typeof value.getTime&&value.getTime()==value.valueOf()}function isNegZero(value){return 0===value&&1/value===-1/0}function identical(obj1,obj2){return obj1===obj2||isNaN(obj1)&&isNaN(obj2)?0!==obj1||isNegZero(obj1)===isNegZero(obj2):void 0}function deepEqualCyclic(obj1,obj2){function isObject(value){return"object"!=typeof value||null===value||value instanceof Boolean||value instanceof Date||value instanceof Number||value instanceof RegExp||value instanceof String?!1:!0}function getIndex(objects,obj){var i;for(i=0;i<objects.length;i++)if(objects[i]===obj)return i;return-1}var objects1=[],objects2=[],paths1=[],paths2=[],compared={};return function deepEqual(obj1,obj2,path1,path2){var type1=typeof obj1,type2=typeof obj2;if(obj1===obj2||isNaN(obj1)||isNaN(obj2)||null==obj1||null==obj2||"object"!==type1||"object"!==type2)return identical(obj1,obj2);if(isElement(obj1)||isElement(obj2))return!1;var isDate1=isDate(obj1),isDate2=isDate(obj2);if(!(!isDate1&&!isDate2||isDate1&&isDate2&&obj1.getTime()===obj2.getTime()))return!1;if(obj1 instanceof RegExp&&obj2 instanceof RegExp&&obj1.toString()!==obj2.toString())return!1;var class1=getClass(obj1),class2=getClass(obj2),keys1=keys(obj1),keys2=keys(obj2);if(isArguments(obj1)||isArguments(obj2)){if(obj1.length!==obj2.length)return!1}else if(type1!==type2||class1!==class2||keys1.length!==keys2.length)return!1;var key,i,l,value1,value2,isObject1,isObject2,index1,index2,newPath1,newPath2;for(i=0,l=keys1.length;l>i;i++){if(key=keys1[i],!o.hasOwnProperty.call(obj2,key))return!1;if(value1=obj1[key],value2=obj2[key],isObject1=isObject(value1),isObject2=isObject(value2),index1=isObject1?getIndex(objects1,value1):-1,index2=isObject2?getIndex(objects2,value2):-1,newPath1=-1!==index1?paths1[index1]:path1+"["+JSON.stringify(key)+"]",newPath2=-1!==index2?paths2[index2]:path2+"["+JSON.stringify(key)+"]",compared[newPath1+newPath2])return!0;if(-1===index1&&isObject1&&(objects1.push(value1),paths1.push(newPath1)),-1===index2&&isObject2&&(objects2.push(value2),paths2.push(newPath2)),isObject1&&isObject2&&(compared[newPath1+newPath2]=!0),!deepEqual(value1,value2,newPath1,newPath2))return!1}return!0}(obj1,obj2,"$1","$2")}function arrayContains(array,subset){if(0===subset.length)return!0;var i,l,j,k;for(i=0,l=array.length;l>i;++i)if(match(array[i],subset[0])){for(j=0,k=subset.length;k>j;++j)if(!match(array[i+j],subset[j]))return!1;return!0}return!1}var match,o=Object.prototype,div="undefined"!=typeof document&&document.createElement("div");return match=function match(object,matcher){if(matcher&&"function"==typeof matcher.test)return matcher.test(object);if("function"==typeof matcher)return matcher(object)===!0;if("string"==typeof matcher){matcher=matcher.toLowerCase();var notNull="string"==typeof object||!!object;return notNull&&String(object).toLowerCase().indexOf(matcher)>=0}if("number"==typeof matcher)return matcher===object;if("boolean"==typeof matcher)return matcher===object;if("undefined"==typeof matcher)return"undefined"==typeof object;if(null===matcher)return null===object;if("Array"===getClass(object)&&"Array"===getClass(matcher))return arrayContains(object,matcher);if(matcher&&"object"==typeof matcher){if(matcher===object)return!0;var prop;for(prop in matcher){var value=object[prop];if("undefined"==typeof value&&"function"==typeof object.getAttribute&&(value=object.getAttribute(prop)),null===matcher[prop]||"undefined"==typeof matcher[prop]){if(value!==matcher[prop])return!1}else if("undefined"==typeof value||!match(value,matcher[prop]))return!1}return!0}throw new Error("Matcher was not a string, a number, a function, a boolean or an object")},{isArguments:isArguments,isElement:isElement,isDate:isDate,isNegZero:isNegZero,identical:identical,deepEqual:deepEqualCyclic,match:match,keys:keys}})},{}],51:[function(require,module,exports){(function(global){"use strict";function parseTime(str){if(!str)return 0;var parsed,strings=str.split(":"),l=strings.length,i=l,ms=0;if(l>3||!/^(\d\d:){0,2}\d\d?$/.test(str))throw new Error("tick only understands numbers and 'h:m:s'");for(;i--;){if(parsed=parseInt(strings[i],10),parsed>=60)throw new Error("Invalid time "+str);ms+=parsed*Math.pow(60,l-i-1)}return 1e3*ms}function getEpoch(epoch){if(!epoch)return 0;if("function"==typeof epoch.getTime)return epoch.getTime();if("number"==typeof epoch)return epoch;throw new TypeError("now should be milliseconds since UNIX epoch")}function inRange(from,to,timer){return timer&&timer.callAt>=from&&timer.callAt<=to}function mirrorDateProperties(target,source){source.now?target.now=function(){return target.clock.now}:delete target.now,source.toSource?target.toSource=function(){return source.toSource()}:delete target.toSource,target.toString=function(){return source.toString()},target.prototype=source.prototype,target.parse=source.parse,target.UTC=source.UTC,target.prototype.toUTCString=source.prototype.toUTCString;for(var prop in source)source.hasOwnProperty(prop)&&(target[prop]=source[prop]);return target}function createDate(){function ClockDate(year,month,date,hour,minute,second,ms){switch(arguments.length){case 0:return new NativeDate(ClockDate.clock.now);case 1:return new NativeDate(year);case 2:return new NativeDate(year,month);case 3:return new NativeDate(year,month,date);case 4:return new NativeDate(year,month,date,hour);case 5:return new NativeDate(year,month,date,hour,minute);case 6:return new NativeDate(year,month,date,hour,minute,second);default:return new NativeDate(year,month,date,hour,minute,second,ms)}}return mirrorDateProperties(ClockDate,NativeDate)}function addTimer(clock,timer){if("undefined"==typeof timer.func)throw new Error("Callback must be provided to timer calls");return clock.timers||(clock.timers={}),timer.id=id++,timer.createdAt=clock.now,timer.callAt=clock.now+(timer.delay||0),clock.timers[timer.id]=timer,addTimerReturnsObject?{id:timer.id,ref:function(){},unref:function(){}}:timer.id}function firstTimerInRange(clock,from,to){var timers=clock.timers,timer=null;for(var id in timers)inRange(from,to,timers[id])&&(!timer||~compareTimers(timer,timers[id]))&&(timer=timers[id]);return timer}function compareTimers(a,b){return a.callAt<b.callAt?-1:a.callAt>b.callAt?1:a.immediate&&!b.immediate?-1:!a.immediate&&b.immediate?1:a.createdAt<b.createdAt?-1:a.createdAt>b.createdAt?1:a.id<b.id?-1:a.id>b.id?1:void 0}function callTimer(clock,timer){"number"==typeof timer.interval?clock.timers[timer.id].callAt+=timer.interval:delete clock.timers[timer.id];try{"function"==typeof timer.func?timer.func.apply(null,timer.args):eval(timer.func)}catch(e){var exception=e}if(clock.timers[timer.id]){if(exception)throw exception}else if(exception)throw exception}function uninstall(clock,target){for(var method,i=0,l=clock.methods.length;l>i;i++)if(method=clock.methods[i],target[method].hadOwnProperty)target[method]=clock["_"+method];else try{delete target[method]}catch(e){}clock.methods=[]}function hijackMethod(target,method,clock){if(clock[method].hadOwnProperty=Object.prototype.hasOwnProperty.call(target,method),clock["_"+method]=target[method],"Date"==method){var date=mirrorDateProperties(clock[method],target[method]);target[method]=date}else{target[method]=function(){return clock[method].apply(clock,arguments)};for(var prop in clock[method])clock[method].hasOwnProperty(prop)&&(target[method][prop]=clock[method][prop])}target[method].clock=clock}var timeoutResult=setTimeout(function(){},0),addTimerReturnsObject="object"==typeof timeoutResult;clearTimeout(timeoutResult);var NativeDate=Date,id=1,timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setImmediate:"undefined"!=typeof setImmediate?setImmediate:void 0,clearImmediate:"undefined"!=typeof clearImmediate?clearImmediate:void 0,setInterval:setInterval,clearInterval:clearInterval,Date:Date},keys=Object.keys||function(obj){var ks=[];for(var key in obj)ks.push(key);return ks};exports.timers=timers;var createClock=exports.createClock=function(now){var clock={now:getEpoch(now),timeouts:{},Date:createDate()};return clock.Date.clock=clock,clock.setTimeout=function(func,timeout){return addTimer(clock,{func:func,args:Array.prototype.slice.call(arguments,2),delay:timeout})},clock.clearTimeout=function(timerId){timerId&&(clock.timers||(clock.timers=[]),"object"==typeof timerId&&(timerId=timerId.id),timerId in clock.timers&&delete clock.timers[timerId])},clock.setInterval=function(func,timeout){return addTimer(clock,{func:func,args:Array.prototype.slice.call(arguments,2),delay:timeout,interval:timeout})},clock.clearInterval=function(timerId){clock.clearTimeout(timerId)},clock.setImmediate=function(func){return addTimer(clock,{func:func,args:Array.prototype.slice.call(arguments,1),immediate:!0})},clock.clearImmediate=function(timerId){clock.clearTimeout(timerId)},clock.tick=function(ms){ms="number"==typeof ms?ms:parseTime(ms);for(var firstException,tickFrom=clock.now,tickTo=clock.now+ms,previous=clock.now,timer=firstTimerInRange(clock,tickFrom,tickTo);timer&&tickTo>=tickFrom;){if(clock.timers[timer.id]){tickFrom=clock.now=timer.callAt;try{callTimer(clock,timer)}catch(e){firstException=firstException||e}}timer=firstTimerInRange(clock,previous,tickTo),previous=tickFrom}if(clock.now=tickTo,firstException)throw firstException;return clock.now},clock.reset=function(){clock.timers={}},clock};exports.install=function(target,now,toFake){"number"==typeof target&&(toFake=now,now=target,target=null),target||(target=global);var clock=createClock(now);clock.uninstall=function(){uninstall(clock,target)},clock.methods=toFake||[],0===clock.methods.length&&(clock.methods=keys(timers));for(var i=0,l=clock.methods.length;l>i;i++)hijackMethod(target,clock.methods[i],clock);return clock}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[14])(14)});